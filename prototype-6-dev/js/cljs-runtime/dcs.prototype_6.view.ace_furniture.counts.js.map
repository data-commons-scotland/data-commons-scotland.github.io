{"version":3,"sources":["dcs/prototype_6/view/ace_furniture/counts.cljs"],"mappings":";AAQA,AAAA,AAAMA,AACCC;AADP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAM4BA,AACT,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACC,AAAKC,AAWIC;;AAM7B,AAAA,AAAMC,AACCJ;AADP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAM4BA,AACTE,AASUC;;AAM7B,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKE;AAIL,AAAA,AAAMC,AAAaC;AAAnB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAI8D,AAAKC;AAAL,AAAQ,AAAA,AAAA,AAACC,AAAcD;AAJrF,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAKoD,AAAKA;AAAL,AAAQ,AAAA,AAAA,AAACC,AAAcD;AAL3E,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAYQH,AACCK,AAAa,AAACX,AAA0BQ,AAAQI,AAUjDN,AACCK,AAAa,AAACN,AAAsBG,AAAQI;;AAOrD,AAAA,AAAME;AAAN,AAAA,AAAA,AAAAD,AACON,AACCQ","names":["dcs.prototype-6.view.ace-furniture.counts/chart-spec-category-level","data","cljs.core.conj","dcs.prototype-6.view.ace-furniture.shared/transform-spec","dcs.prototype-6.view.ace-furniture.shared/color-spec","dcs.prototype-6.view.ace-furniture.counts/chart-spec-item-level","dcs.prototype-6.view.ace-furniture.counts/hint","dcs.prototype-6.view.ace-furniture.counts/tabbed-area","counts","e","dcs.prototype-6.util/open-tab","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/deref","dcs.prototype-6.view.ace-furniture.counts/root","dcs.prototype-6.state/ace-furniture-derivation-count-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.ace-furniture.counts\n  (:require\n    [oz.core :as oz]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]\n    [dcs.prototype-6.view.ace-furniture.shared :as shared]))\n\n\n(defn chart-spec-category-level\n      [data]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      500\n       :height     400\n       :background \"#f2dfce\"\n       :data       {:values data}\n       :transform  (conj shared/transform-spec\n                         {:aggregate [{:op \"sum\" :field \"count\" :as \"count\"}]\n                          :groupby [\"period\" \"category\"]})\n       :mark       {:type \"bar\"\n                    :cornerRadiusTopLeft  3\n                    :cornerRadiusTopRight 3}\n       :encoding   {:y       {:field \"category\" :type \"nominal\"\n                              :sort {:field \"count\" :order \"descending\"}}\n                    :x       {:title \"count\"\n                              :field \"count\" :type \"quantitative\"\n                              :axis {:title \"total count\" :orient \"top\"}}\n                    :color   shared/color-spec\n                    :tooltip [{:title \"category\" :field \"category\" :type \"nominal\"}\n                              {:title \"period\" :field \"period\" :type \"nominal\"}\n                              {:title \"count\" :field \"count\" :type \"quantitative\"}]}})\n\n\n(defn chart-spec-item-level\n      [data]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      500\n       :height     1500\n       :background \"#f2dfce\"\n       :data       {:values data}\n       :transform  shared/transform-spec\n       :mark       {:type \"bar\"\n                    :cornerRadiusTopLeft  3\n                    :cornerRadiusTopRight 3}\n       :encoding   {:y       {:title \"sub-category\" :field \"item\" :type \"nominal\"\n                              :sort {:field \"count\" :order \"descending\"}}\n                    :x       {:title \"count\"\n                              :field \"count\" :type \"quantitative\"\n                              :axis {:title \"total count\" :orient \"top\"}}\n                    :color   shared/color-spec\n                    :tooltip [{:title \"category\" :field \"category\" :type \"nominal\"}\n                              {:title \"sub-category\" :field \"item\" :type \"nominal\"}\n                              {:title \"period\" :field \"period\" :type \"nominal\"}\n                              {:title \"count\" :field \"count\" :type \"quantitative\"}]}})\n\n(def hint [:div.content.is-small.has-text-info-dark\n           [:p \"A coloured segment of a bar represents an \" [:em \"accounting\"] \" period.\"\n            \" Click on it to see further data detail.\"]])\n\n(defn tabbed-area [counts]\n      [:div\n       [:div.tabs\n        [:ul\n         [:li.tab-counts-since-inception.is-active {:on-click (fn [e] (util/open-tab e \"counts-since-inception\" \"category-level\"))} [:a \"Less detail\"]]\n         [:li.tab-counts-since-inception {:on-click (fn [e] (util/open-tab e \"counts-since-inception\" \"item-level\"))} [:a \"More detail\"]]]]\n\n\n       [:div#category-level-counts-since-inception.content.tab-content-counts-since-inception\n        [:p \"The \" [:b \"total count\"] \" of the items of furniture sold in each \" [:b \"category\"] \".\"]\n         [:p \"The categories \" [:span.has-text-warning \"Furniture\"] \" and \" [:span.has-text-warning \"Soft Furniture\"] \" account (by far) for the most items sold.\"\n          \" Click on the \" [:span.has-text-warning \"More detail\"] \" tab [above] to find out which specific types have been the most popular.\"]\n        hint\n        [oz/vega-lite (chart-spec-category-level counts) util/vega-embed-opts]\n        ]\n\n\n       [:div#item-level-counts-since-inception.content.tab-content-counts-since-inception {:style {:display \"none\"}}\n        [:p \"The \" [:b \"total count\"] \" of the items of furniture sold in each \" [:b \"sub-category\"] \".\"]\n         [:p \"The sub-category \" [:span.has-text-warning \"Chair, Kitchen, Dining or Wooden\"] \" accounts (by far) for the most items sold.\"\n          \" Click on one of its bar segments and you'll see that it is associated with the category \" [:span.has-text-warning \"Furniture\"] \".\"\n          \" Interestingly, many of the top sub-categories appear to have enjoyed an upwards surge in numbers during the last (and shortest) of the 3 accounting periods.\"\n          \" The trends graphs (later on this page) reinforce that observation.\"]\n        hint\n        [oz/vega-lite (chart-spec-item-level counts) util/vega-embed-opts]\n        ]\n\n\n       ]\n      )\n\n(defn root []\n      [tabbed-area\n       @state/ace-furniture-derivation-count-cursor])"]}