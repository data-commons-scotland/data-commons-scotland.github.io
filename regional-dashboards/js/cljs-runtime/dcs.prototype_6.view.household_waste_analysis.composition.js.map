{"version":3,"sources":["dcs/prototype_6/view/household_waste_analysis/composition.cljs"],"mappings":";AAQA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKA;AAEL,AAAA,AAAMC,AACHC;AADH,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMwBA,AAQQF;;AAWhC,AAAA,AAAMG,AAAQC;AAAd,AACM,AAAMF,AAAWE;AAAjB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMUC,AAAa,AAACJ,AAAWC;;AAazC,AAAA,AAAMK;AAAN,AAAA,AAAA,AAAAD,AACOH,AACCK","names":["dcs.prototype-6.view.household-waste-analysis.composition/stratum-labels","dcs.prototype-6.view.household-waste-analysis.composition/chart-spec","chart-data","dcs.prototype-6.view.household-waste-analysis.composition/charts","derivation","oz.core/vega-lite","cljs.core/deref","dcs.prototype-6.view.household-waste-analysis.composition/root","dcs.prototype-6.state/household-waste-analysis-derivation-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.household-waste-analysis.composition\n  (:require\n    [reagent.core :as r]\n    [oz.core :as oz]\n    [goog.string :as gstring]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]))\n\n(def stratum-labels [\"urban \u00a3\" \"urban \u00a3\u00a3\" \"urban \u00a3\u00a3\u00a3\" \"rural \u00a3/\u00a3\u00a3\" \"rural \u00a3\u00a3\u00a3\"])\n\n(defn chart-spec\n  [chart-data]\n  {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n   :background \"#f2dfce\"\n   :width      400\n   :height     250\n   :data       {:values chart-data}\n   :transform  [{:aggregate [{:op \"sum\" :field \"kgPerHhPerWk\" :as \"kgPer2Wks\"}]\n                 :groupby [\"stratum\" \"material-L1\"]}\n                {:calculate \"datum.kgPer2Wks / 2\" :as \"kg\"}] ;; to average over the 2 phases\n   :mark       {:type \"bar\"\n                :cornerRadiusTopLeft 3\n                :cornerRadiusTopRight 3}\n   :encoding   {:x       {:field \"stratum\" :type \"nominal\"\n                          :sort stratum-labels\n                          :axis {:title \"household type (location type & council tax band)\"\n                                 :labelAngle 0}}\n                :y       {:field \"kg\" :type \"quantitative\"\n                          :axis {:title \"average kg/hh/wk\"}}\n                :color {:field \"material-L1\" :type \"nominal\"\n                        :legend {:title \"material (high level)\"}}\n                :tooltip [{:field \"stratum\" :type \"nominal\" :title \"house type (location & CTax)\"}\n                          {:field \"material-L1\" :type \"nominal\" :title \"material (high level)\"}\n                          {:field \"kg\" :type \"quantitative\" :title \"avg kg per household per wk\"}]}})\n\n(defn charts [derivation]\n      (let [chart-data derivation]\n\n           [:div.tile.is-ancestor\n            [:div.tile.is-parent\n\n              [:div.tile.is-child\n               [oz/vega-lite (chart-spec chart-data)\n                {:actions false}]]\n\n              [:div.tile.is-child.content\n               [:blockquote\n                [:p \"TODO:\"]\n                [:ul\n                 [:li \"Say that the graph shows that... food waste forms a significant component.\"]\n                 [:li \"Rural \u00a3/\u00a3\u00a3 households dispose of a lot of fine-grained material - what is it? Dirt?\"]]]\n                  ]\n\n             ]]))\n\n(defn root []\n      [charts\n       @state/household-waste-analysis-derivation-cursor])\n"]}