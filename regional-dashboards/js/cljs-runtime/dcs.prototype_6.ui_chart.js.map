{"version":3,"sources":["dcs/prototype_6/ui_chart.cljs"],"mappings":";AAOA,AAAA,AAAMA,AAAYC,AAAMC;AAAxB,AACM,AAAMC,AAAW,AAACC,AAAM,AAAA,AAACC,AAAeH;AAAxC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEkBD,AAISC,AAKoEC;;AASrG,AAAA,AAAMG,AAAOC;AAAb,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEQC,AAAa,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACR,AAAsDO,AACAA,AACAA;;AAM5E,AAAA,AAAMG;AAAN,AAAA,AAAA,AAAAD,AACOH,AAAOK","names":["dcs.prototype-6.ui-chart/chart-spec","title","data","year-count","cljs.core/count","cljs.core/group-by","dcs.prototype-6.ui-chart/chart","region","oz.core/vega-lite","cljs.core/deref","dcs.prototype-6.ui-chart/create","dcs.prototype-6.state/region-holder"],"sourcesContent":["(ns dcs.prototype-6.ui-chart\n  (:require\n    [reagent.core :as r]\n    [oz.core :as oz]\n    [dcs.prototype-6.state :as state]))\n\n\n(defn chart-spec [title data]\n      (let [year-count (count (group-by :year data))]\n           {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n            :title      title\n            :width      200\n            :height     150\n            :background \"floralwhite\"\n            :data       {:values data}\n            :mark       \"line\"\n            :selection  {:my {:type   \"multi\"\n                              :fields [\"region\"]\n                              :bind   \"legend\"}}\n            :encoding   {:x       {:field \"year\" :type \"temporal\" :timeUnit \"year\" :axis {:tickCount year-count :title \"year\"}}\n                         :y       {:field \"tonnage\" :type \"quantitative\" :scale {:zero false} :axis {:title \"tonnage\"}}\n                         :color   {:field \"region\" :type \"nominal\"}\n                         :opacity {:condition {:selection \"my\" :value 1}\n                                   :value     0.2}\n                         :tooltip [{:field \"region\" :type \"nominal\"}\n                                   {:field \"year\" :type \"temporal\"}\n                                   {:field \"tonnage\" :type \"quantitative\"}]}}))\n\n(defn chart [region]\n      [:div\n       [oz/vega-lite (chart-spec \"Trends\" [{:year \"2017\" :tonnage 5 :region region}\n                                           {:year \"2018\" :tonnage 4 :region region}\n                                           {:year \"2019\" :tonnage 3 :region region}\n                                           {:year \"2017\" :tonnage 6 :region \"Average\"}\n                                           {:year \"2018\" :tonnage 6 :region \"Average\"}\n                                           {:year \"2019\" :tonnage 4 :region \"Average\"}])\n        {:actions false}]])\n\n(defn create []\n      [chart @state/region-holder])"]}