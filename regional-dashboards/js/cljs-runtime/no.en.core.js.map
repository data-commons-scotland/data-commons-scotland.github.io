{"version":3,"sources":["no/en/core.cljc"],"mappings":"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","names":["no.en.core/port-number","no.en.core/url-regex","no.en.core/split-by-regex","s","pattern","cljs.core/sequential?","clojure.string/blank?","clojure.string.split","no.en.core/split-by-comma","no.en.core/utf8-string","bytes","cljs.core.ex_info","no.en.core/base64-encode","goog.crypt.base64/encodeString","no.en.core/base64-decode","goog.crypt.base64/decodeString","no.en.core/compact-map","m","cljs.core.reduce","k","v","cljs.core.get","cljs.core/map?","cljs.core/empty?","cljs.core.dissoc","cljs.core/keys","var_args","args__4742__auto__","len__4736__auto__","i__4737__auto__","argseq__4743__auto__","cljs.core/IndexedSeq","no.en.core/url-encode","p__26215","vec__26216","cljs.core.nth","seq26213","G__26214","cljs.core/first","cljs.core/next","self__4723__auto__","encoding","js/encodeURIComponent","clojure.string/replace","no.en.core/url-decode","p__26221","vec__26222","seq26219","G__26220","js/decodeURIComponent","no.en.core/pow","n","x","js/Math","no.en.core/byte-scale","no.en.core/apply-unit","number","unit","G__26225","clojure.string/upper-case","G__26226","js/Error","no.en.core/parse-number","parse-fn","temp__5733__auto__","matches","cljs.core/re-matches","G__26227","cljs.core/not","js/isNaN","no.en.core/parse-bytes","cljs.reader.read_string","cljs.core/long","or__4126__auto__","no.en.core/parse-integer","p1__26228#","js/parseInt","no.en.core/parse-long","p1__26229#","no.en.core/parse-double","p1__26230#","js/parseFloat","no.en.core/parse-float","p1__26231#","no.en.core/format-query-params","params","cljs.core.sort_by","cljs.core/seq","p1__26232#","cljs.core.remove","cljs.core/second","p1__26233#","cljs.core.map","cljs.core/PersistentVector","cljs.core/name","p1__26234#","clojure.string.join","no.en.core/format-url","query-params","map__26238","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","user","password","port","cljs.core._EQ_","G__26240","no.en.core/parse-percent","no.en.core/pattern-quote","no.en.core/separator","no.en.core/parse-query-params","p1__26241#","p1__26242#","cljs.core.filter","cljs.core/count","p1__26243#","cljs.core.mapcat","cljs.core.keyword","no.en.core/parse-url","scheme","no.en.core/with-retries*","thunk","result","e26244","e","no.en.core/editable?","coll","cljs.core/native-satisfies?","cljs.core/IEditableCollection","no.en.core/reduce-map","f","cljs.core/persistent!","cljs.core/reduce-kv","cljs.core/assoc!","cljs.core/transient","cljs.core/empty","cljs.core/assoc","no.en.core/map-keys","xf","G__26246","G__26247","G__26248","no.en.core/map-vals","G__26249","G__26250","G__26251","no.en.core/deep-merge","seq26252","self__4724__auto__","maps","cljs.core/every?","cljs.core/merge-with","cljs.core/last","no.en.core/deep-merge-with","seq26253","G__26254"],"sourcesContent":["(ns no.en.core\n  (:refer-clojure :exclude [replace read-string])\n  (:require [clojure.string :refer [blank? join replace split upper-case]]\n            #?(:clj [clojure.edn :refer [read-string]])\n            #?(:cljs [cljs.reader :refer [read-string]])\n            #?(:cljs [goog.crypt.base64 :as base64]))\n  #?(:clj (:import [java.net URLEncoder URLDecoder]\n                   [org.apache.commons.codec.binary Base64])))\n\n(def port-number\n  {:http 80\n   :https 443\n   :mysql 3306\n   :postgresql 5432\n   :rabbitmq 5672})\n\n(def url-regex #\"([^:]+)://(([^:]+):([^@]+)@)?(([^:/]+)(:([0-9]+))?((/[^?]*)(\\?([^#]*))?)?)(\\#(.*))?\")\n\n(defn split-by-regex\n  \"Split the string `s` by the regex `pattern`.\"\n  [s pattern]\n  (if (sequential? s)\n    s (if-not (blank? s)\n        (split s pattern))))\n\n(defn split-by-comma\n  \"Split the string `s` by comma.\"\n  [s] (split-by-regex s #\"\\s*,\\s*\"))\n\n(defn utf8-string\n  \"Returns `bytes` as an UTF-8 encoded string.\"\n  [bytes]\n  #?(:clj (String. bytes \"UTF-8\")\n     :cljs (throw (ex-info \"utf8-string not implemented yet\" bytes))))\n\n(defn base64-encode\n  \"Returns `s` as a Base64 encoded string.\"\n  [bytes]\n  (when bytes\n    #?(:clj (String. (Base64/encodeBase64 bytes))\n       :cljs (base64/encodeString bytes false))))\n\n(defn base64-decode\n  \"Returns `s` as a Base64 decoded string.\"\n  [s]\n  (when s\n    #?(:clj (Base64/decodeBase64 (.getBytes s))\n       :cljs (base64/decodeString s false))))\n\n(defn compact-map\n  \"Removes all map entries where the value of the entry is empty.\"\n  [m]\n  (reduce\n   (fn [m k]\n     (let [v (get m k)]\n       (if (or (nil? v)\n               (and (or (map? v)\n                        (sequential? v))\n                    (empty? v)))\n         (dissoc m k) m)))\n   m (keys m)))\n\n(defn url-encode\n  \"Returns `s` as an URL encoded string.\"\n  [s & [encoding]]\n  (when s\n    #?(:clj (-> (URLEncoder/encode (str s) (or encoding \"UTF-8\"))\n                (replace \"%7E\" \"~\")\n                (replace \"*\" \"%2A\")\n                (replace \"+\" \"%20\"))\n       :cljs (-> (js/encodeURIComponent (str s))\n                 (replace \"*\" \"%2A\")))))\n\n(defn url-decode\n  \"Returns `s` as an URL decoded string.\"\n  [s & [encoding]]\n  (when s\n    #?(:clj (URLDecoder/decode s (or encoding \"UTF-8\"))\n       :cljs (js/decodeURIComponent s))))\n\n(defn pow [n x]\n  #?(:clj (Math/pow n x)\n     :cljs (.pow js/Math n x)))\n\n(def byte-scale\n  {\"B\" (pow 1024 0)\n   \"K\" (pow 1024 1)\n   \"M\" (pow 1024 2)\n   \"G\" (pow 1024 3)\n   \"T\" (pow 1024 4)\n   \"P\" (pow 1024 5)\n   \"E\" (pow 1024 6)\n   \"Z\" (pow 1024 7)\n   \"Y\" (pow 1024 8)})\n\n(defn- apply-unit [number unit]\n  (if (string? unit)\n    (case (upper-case unit)\n      (case unit\n        \"M\" (* number 1000000)\n        \"B\" (* number 1000000000)))\n    number))\n\n(defn- parse-number [s parse-fn]\n  (if-let [matches (re-matches #\"\\s*([-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?)(M|B)?.*\" (str s))]\n    #?(:clj\n       (try (let [number (parse-fn (nth matches 1))\n                  unit (nth matches 3)]\n              (apply-unit number unit))\n            (catch NumberFormatException _ nil))\n       :cljs\n       (let [number (parse-fn (nth matches 1))\n             unit (nth matches 3)]\n         (if-not (js/isNaN number)\n           (apply-unit number unit))))))\n\n(defn parse-bytes [s]\n  (if-let [matches (re-matches #\"\\s*([-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?)(B|K|M|G|T|P|E|Z|Y)?.*\" (str s))]\n    (let [number (read-string (nth matches 1))\n          unit (nth matches 3)]\n      (long (* (long (read-string (str (nth matches 1))))\n               (get byte-scale (upper-case (or unit \"\")) 1))))))\n\n(defn parse-integer\n  \"Parse `s` as a integer number.\"\n  [s] (parse-number s #(#?(:clj Integer/parseInt :cljs js/parseInt) %1)))\n\n(defn parse-long\n  \"Parse `s` as a long number.\"\n  [s] (parse-number s #(#?(:clj Long/parseLong :cljs js/parseInt) %1)))\n\n(defn parse-double\n  \"Parse `s` as a double number.\"\n  [s] (parse-number s #(#?(:clj Double/parseDouble :cljs js/parseFloat) %1)))\n\n(defn parse-float\n  \"Parse `s` as a float number.\"\n  [s] (parse-number s #(#?(:clj Float/parseFloat :cljs js/parseFloat) %1)))\n\n(defn format-query-params\n  \"Format the map `m` into a query parameter string.\"\n  [m]\n  (let [params (->> (sort-by first (seq m))\n                    (remove #(blank? (str (second %1))))\n                    (map #(vector (url-encode (name (first %1)))\n                                  (url-encode (second %1))))\n                    (map #(join \"=\" %1))\n                    (join \"&\"))]\n    (if-not (blank? params)\n      params)))\n\n(defn format-url\n  \"Format the Ring map as an url.\"\n  [m]\n  (if (not (empty? m))\n    (let [query-params (:query-params m)]\n      (str (if (:scheme m)\n             (str (name (:scheme m)) \"://\"))\n           (let [{:keys [user password]} m]\n             (if user (str (if user user) (if password (str \":\" password)) \"@\")))\n           (:server-name m)\n           (if-let [port (:server-port m)]\n             (if-not (= port (port-number (:scheme m)))\n               (str \":\" port)))\n           (if (and (nil? (:uri m))\n                    (not (empty? query-params)))\n             \"/\" (:uri m))\n           (if-not (empty? query-params)\n             (str \"?\" (format-query-params query-params)))\n           (if-not (blank? (:fragment m))\n             (str \"#\" (:fragment m)))))))\n\n(defn parse-percent\n  \"Parse `s` as a percentage.\"\n  [s] (parse-double (replace s \"%\" \"\")))\n\n(defn pattern-quote\n  \"Quote the special characters in `s` that are used in regular expressions.\"\n  [s] (replace (name s) #\"([\\[\\]\\^\\$\\|\\(\\)\\\\\\+\\*\\?\\{\\}\\=\\!.])\" \"\\\\\\\\$1\"))\n\n(defn separator\n  \"Returns the first string that separates the components in `s`.\"\n  [s]\n  (if-let [matches (re-matches #\"(?i)([a-z0-9_-]+)([^a-z0-9_-]+).*\" s)]\n    (nth matches 2)))\n\n(defn parse-query-params\n  \"Parse the query parameter string `s` and return a map.\"\n  [s]\n  (if s\n    (->> (split (str s) #\"&\")\n         (map #(split %1 #\"=\"))\n         (filter #(= 2 (count %1)))\n         (mapcat #(vector (keyword (url-decode (first %1))) (url-decode (second %1))))\n         (apply hash-map))))\n\n(defn parse-url\n  \"Parse the url `s` and return a Ring compatible map.\"\n  [s]\n  (if-let [matches (re-matches url-regex (str s))]\n    (let [scheme (keyword (nth matches 1))]\n      (compact-map\n       {:scheme scheme\n        :user (nth matches 3)\n        :password (nth matches 4)\n        :server-name (nth matches 6)\n        :server-port (or (parse-integer (nth matches 8)) (port-number scheme))\n        :uri (nth matches 10)\n        :query-params (parse-query-params  (nth matches 12))\n        :query-string (nth matches 12)\n        :fragment (nth matches 14)}))))\n\n(defn with-retries*\n  \"Executes thunk. If an exception is thrown, will retry. At most n retries\n  are done. If still some exception is thrown it is bubbled upwards in\n  the call chain.\"\n  [n thunk]\n  (loop [n n]\n    (if-let [result\n             (try\n               [(thunk)]\n               (catch #?(:clj Exception :cljs js/Error) e\n                 (when (zero? n)\n                   (throw e))))]\n      (result 0)\n      (recur (dec n)))))\n\n(defmacro with-retries\n  \"Executes body. If an exception is thrown, will retry. At most n retries\n  are done. If still some exception is thrown it is bubbled upwards in\n  the call chain.\"\n  [n & body]\n  `(no.en.core/with-retries* ~n (fn [] ~@body)))\n\n(defn- editable? [coll]\n  #?(:clj  (instance? clojure.lang.IEditableCollection coll)\n     :cljs (satisfies? cljs.core.IEditableCollection coll)))\n\n(defn- reduce-map [f coll]\n  (if (editable? coll)\n    (persistent! (reduce-kv (f assoc!) (transient (empty coll)) coll))\n    (reduce-kv (f assoc) (empty coll) coll)))\n\n(defn map-keys\n  \"Maps a function over the keys of an associative collection.\"\n  [f coll]\n  (reduce-map (fn [xf] (fn [m k v] (xf m (f k) v))) coll))\n\n(defn map-vals\n  \"Maps a function over the values of an associative collection.\"\n  [f coll]\n  (reduce-map (fn [xf] (fn [m k v] (xf m k (f v)))) coll))\n\n(defn deep-merge\n  \"Like merge, but merges maps recursively.\"\n  [& maps]\n  (if (every? map? maps)\n    (apply merge-with deep-merge maps)\n    (last maps)))\n\n(defn deep-merge-with\n  \"Like merge-with, but merges maps recursively, applying the given fn\n  only when there's a non-map at a particular level.\"\n  [f & maps]\n  (apply\n   (fn m [& maps]\n     (if (every? map? maps)\n       (apply merge-with m maps)\n       (apply f maps)))\n   maps))\n"]}