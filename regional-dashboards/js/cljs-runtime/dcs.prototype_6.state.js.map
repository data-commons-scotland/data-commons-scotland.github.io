{"version":3,"sources":["dcs/prototype_6/state.cljs"],"mappings":"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","names":["js/dcs","js/dcs.prototype-6","js/dcs.prototype-6.state","js/dcs.prototype-6.state.app-state","dcs.prototype-6.state/app-state","reagent.core.atom","js/dcs.prototype-6.state.route-match","dcs.prototype-6.state/route-match","js/dcs.prototype-6.state.region-holder","dcs.prototype-6.state/region-holder","js/dcs.prototype-6.state.geojson-holder","dcs.prototype-6.state/geojson-holder","js/dcs.prototype-6.state.household-waste-derivation-generation-holder","dcs.prototype-6.state/household-waste-derivation-generation-holder","js/dcs.prototype-6.state.household-waste-derivation-percent-recycled-holder","dcs.prototype-6.state/household-waste-derivation-percent-recycled-holder","js/dcs.prototype-6.state.household-waste-derivation-management-holder","dcs.prototype-6.state/household-waste-derivation-management-holder","js/dcs.prototype-6.state.household-waste-derivation-composition-holder","dcs.prototype-6.state/household-waste-derivation-composition-holder","js/dcs.prototype-6.state.household-waste-derivation-generation-positions-holder","dcs.prototype-6.state/household-waste-derivation-generation-positions-holder","js/dcs.prototype-6.state.household-waste-derivation-percent-recycled-positions-holder","dcs.prototype-6.state/household-waste-derivation-percent-recycled-positions-holder","js/dcs.prototype-6.state.household-co2e-derivation-generation-holder","dcs.prototype-6.state/household-co2e-derivation-generation-holder","js/dcs.prototype-6.state.household-co2e-derivation-generation-positions-holder","dcs.prototype-6.state/household-co2e-derivation-generation-positions-holder","js/dcs.prototype-6.state.business-waste-by-region-derivation-generation-holder","dcs.prototype-6.state/business-waste-by-region-derivation-generation-holder","cljs.core.atom","js/dcs.prototype-6.state.business-waste-by-region-derivation-composition-holder","dcs.prototype-6.state/business-waste-by-region-derivation-composition-holder","js/dcs.prototype-6.state.waste-site-derivation-holder","dcs.prototype-6.state/waste-site-derivation-holder","js/dcs.prototype-6.state.population-holder","dcs.prototype-6.state/population-holder","js/dcs.prototype-6.state.household-waste-holder","dcs.prototype-6.state/household-waste-holder","js/dcs.prototype-6.state.household-co2e-holder","dcs.prototype-6.state/household-co2e-holder","js/dcs.prototype-6.state.business-waste-by-region-holder","dcs.prototype-6.state/business-waste-by-region-holder","js/dcs.prototype-6.state.waste-site-holder","dcs.prototype-6.state/waste-site-holder","dcs.prototype-6.state/fetch","url","body-handler","js/console.log","c__25757__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__25758__auto__","switch__25734__auto__","state_29240","state_val_29241","inst_29230","cljs.core.async.impl.ioc-helpers/take!","inst_29232","inst_29233","inst_29234","inst_29235","inst_29236","inst_29237","inst_29238","statearr-29242","cljs.core.async.impl.ioc-helpers/return-chan","statearr-29243","state-machine__25735__auto__","ret-value__25736__auto__","result__25737__auto__","cljs.core/keyword-identical?","ex__25738__auto__","e29244","statearr-29245","cljs.core/seq","statearr-29246","cljs.core/first","state__25759__auto__","statearr-29247","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs-http.client/get","dcs.prototype-6.state/load-data","geojson","cljs.core/clj->js","cljs.core/reset!","population","dcs.prototype-6.data-shaping/rollup-population-regions","cljs.core.concat","household-waste","dcs.prototype-6.data-shaping/rollup-household-waste-regions","household-co2e","dcs.prototype-6.data-shaping/rollup-household-co2e-regions","business-waste-by-region","dcs.prototype-6.data-shaping/rollup-business-waste-by-region-regions","waste-site","dcs.prototype-6.state/trend","xy-pairs","rf","kixi.stats.core/simple-linear-regression","cljs.core/second","jsobj","cljs.core.transduce","cljs.core/identity","dcs.prototype-6.state/maybe-calc-household-waste-derivations","cljs.core/deref","household-waste-derivation-generation0","dcs.prototype-6.data-shaping/rollup-household-waste-materials-and-management","household-waste-derivation-management0","dcs.prototype-6.data-shaping/rollup-household-waste-materials","household-waste-derivation-composition0","dcs.prototype-6.data-shaping/rollup-household-waste-managements","population-for-lookup","cljs.core/group-by","cljs.core.juxt","lookup-population","region","year","cljs.core.get","household-waste-derivation-generation","cljs.core.map","p__29255","map__29256","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","tonnes","household-waste-derivation-management","p__29258","map__29259","management","household-waste-derivation-composition","p__29261","map__29262","material","household-waste-derivation-percent-recycled","dcs.prototype-6.data-shaping/calc-household-waste-percentage-recycled","latest-year","cljs.core/max","household-waste-derivation-generation-positions","p1__29248#","cljs.core.remove","cljs.core._EQ_","p1__29249#","cljs.core.filter","cljs.core.sort_by","cljs.core.map_indexed","ix","m","p1__29250#","p__29264","vec__29265","cljs.core.nth","coll","p1__29251#","cljs.core/PersistentVector","household-waste-derivation-percent-recycled-positions","p1__29252#","p1__29253#","cljs.core/reverse","p__29268","vec__29269","p1__29254#","dcs.prototype-6.state/maybe-calc-household-co2e-derivations","household-co2e-derivation-generation","p__29276","map__29277","household-co2e-derivation-generation-positions","p1__29272#","p1__29273#","p1__29274#","p__29279","vec__29280","p1__29275#","dcs.prototype-6.state/maybe-calc-business-waste-by-region-derivations","region-count","cljs.core.distinct","cljs.core/count","business-waste-by-region-derivation-generation0","dcs.prototype-6.data-shaping/rollup-business-waste-by-region-materials","business-waste-by-region-derivation-generation","p__29283","map__29284","original","business-waste-by-region-derivation-composition","dcs.prototype-6.state/maybe-calc-waste-site-derivations","waste-site-derivation","dcs.prototype-6.data-shaping/count-waste-sites-per-category-per-region","cljs.core/add-watch","_key","_atom","old-state","new-state"],"sourcesContent":["(ns dcs.prototype-6.state\n  (:require [reagent.core :as r]\n            [cljs-http.client :as http]\n            [cljs.core.async :refer [<!]]\n            [cljs.pprint :as pp]\n            [kixi.stats.core :as stats]\n            [dcs.prototype-6.data-shaping :as data-shaping])\n  (:require-macros [cljs.core.async.macros :refer [go]]))\n\n(defonce app-state (r/atom {:count 0}))\n\n(defonce route-match (r/atom nil))\n\n(defonce region-holder (r/atom \"Please select a region...\"))\n\n(defonce geojson-holder (r/atom nil))\n\n(defonce household-waste-derivation-generation-holder (r/atom nil))\n(defonce household-waste-derivation-percent-recycled-holder (r/atom nil))\n(defonce household-waste-derivation-management-holder (r/atom nil))\n(defonce household-waste-derivation-composition-holder (r/atom nil))\n(defonce household-waste-derivation-generation-positions-holder (r/atom nil))\n(defonce household-waste-derivation-percent-recycled-positions-holder (r/atom nil))\n\n(defonce household-co2e-derivation-generation-holder (r/atom nil))\n(defonce household-co2e-derivation-generation-positions-holder (r/atom nil))\n\n(defonce business-waste-by-region-derivation-generation-holder (atom nil))\n(defonce business-waste-by-region-derivation-composition-holder (atom nil))\n\n(defonce waste-site-derivation-holder (atom nil))\n\n;; -----------------\n\n(defonce population-holder (atom nil))\n(defonce household-waste-holder (atom nil))\n(defonce household-co2e-holder (atom nil))\n(defonce business-waste-by-region-holder (atom nil))\n(defonce waste-site-holder (atom nil))\n\n;; -----------------\n\n;; Fetch data into holders\n\n(defn fetch\n      [url body-handler]\n      (js/console.log (str \"Fetching \" url))\n      (go (let [response (<! (http/get url))]\n               (do\n                 (js/console.log (str \"Response from \" url \": status=\" (:status response) \" success=\" (:success response)))\n                 (body-handler (:body response))))))\n\n(defn load-data\n      []\n      (js/console.log \"Loading data files\")\n\n      (fetch \"geojson.json\"\n             (fn [geojson] (->> geojson\n                                clj->js\n                                (reset! geojson-holder))))\n\n      (fetch \"population.json\"\n             (fn [population] (->> population\n                                   data-shaping/rollup-population-regions\n                                   (concat population)\n                                   (reset! population-holder))))\n\n      (fetch \"household-waste.json\"\n             (fn [household-waste] (->> household-waste\n                                        data-shaping/rollup-household-waste-regions\n                                        (concat household-waste)\n                                        (reset! household-waste-holder))))\n\n      (fetch \"household-co2e.json\"\n             (fn [household-co2e] (->> household-co2e\n                                       data-shaping/rollup-household-co2e-regions\n                                       (concat household-co2e)\n                                       (reset! household-co2e-holder))))\n\n      (fetch \"business-waste-by-region.json\"\n             (fn [business-waste-by-region] (->> business-waste-by-region\n                                                 data-shaping/rollup-business-waste-by-region-regions\n                                                 (concat business-waste-by-region)\n                                                 (reset! business-waste-by-region-holder))))\n\n      (fetch \"waste-site.json\"\n             (fn [waste-site] (->> waste-site\n                                   (reset! waste-site-holder)))))\n\n;; ----------------------\n\n;; Calc derived data\n\n; Compute 'the trend of y'.\n; (Returns the gradient of a linear approximation to the curve decribed by xy-pairs.)\n(defn trend [xy-pairs]\n      (let [rf (stats/simple-linear-regression first second)\n            ^js jsobj (transduce identity rf xy-pairs)]\n           (. jsobj -slope)))\n\n\n(defn maybe-calc-household-waste-derivations []\n      (let [household-waste @household-waste-holder\n            population @population-holder]\n\n           (when (and (some? household-waste)\n                      (some? population))\n                 (js/console.log \"calculating household-waste-derivations\")\n\n                 (let [;; Roll-up to get values for (region, year) pairs\n                       household-waste-derivation-generation0 (data-shaping/rollup-household-waste-materials-and-management household-waste)\n\n                       ;; Roll-up to get values for (region, year, management) triples\n                       household-waste-derivation-management0 (data-shaping/rollup-household-waste-materials household-waste)\n\n                       ;; Roll-up to get values for (region, year, material) triples\n                       household-waste-derivation-composition0 (data-shaping/rollup-household-waste-managements household-waste)\n\n                       ;; Prep for the per citizen calculation\n                       population-for-lookup (group-by (juxt :region :year) population)\n                       lookup-population (fn [region year] (-> population-for-lookup (get [region year]) first :population))\n\n                       ;; Calculate the per citizen values\n                       household-waste-derivation-generation (map (fn [{:keys [region year tonnes]}] {:region region\n                                                                                                      :year   year\n                                                                                                      :tonnes (double (/ tonnes (lookup-population region year)))})\n                                                                  household-waste-derivation-generation0)\n                       household-waste-derivation-management (map (fn [{:keys [region year management tonnes]}] {:region     region\n                                                                                                                 :year       year\n                                                                                                                 :management management\n                                                                                                                 :tonnes     (double (/ tonnes (lookup-population region year)))})\n                                                                  household-waste-derivation-management0)\n                       household-waste-derivation-composition (map (fn [{:keys [region year material tonnes]}] {:region   region\n                                                                                                                :year     year\n                                                                                                                :material material\n                                                                                                                :tonnes   (double (/ tonnes (lookup-population region year)))})\n                                                                   household-waste-derivation-composition0)\n\n                       ;; Calculate the percentage recycled values\n                       household-waste-derivation-percent-recycled (data-shaping/calc-household-waste-percentage-recycled household-waste)\n\n                       ;; Calculate positions\n                       latest-year (->> household-waste\n                                        (map :year)\n                                        (apply max))\n                       household-waste-derivation-generation-positions {:latest-positions (->> household-waste-derivation-generation\n                                                                                               (remove #(= \"Scotland\" (:region %)))\n                                                                                               (filter #(= latest-year (:year %)))\n                                                                                               (sort-by :tonnes)\n                                                                                               (map-indexed (fn [ix m] {:region   (:region m)\n                                                                                                                        :position (inc ix)\n                                                                                                                        :year     latest-year})))\n                                                                        :trend-positions  (->> household-waste-derivation-generation\n                                                                                               (remove #(= \"Scotland\" (:region %)))\n                                                                                               (group-by :region)\n                                                                                               (map (fn [[region coll]] {:region region\n                                                                                                                         :trend  (->> coll\n                                                                                                                                      (map #(vector (double (:year %)) (:tonnes %)))\n                                                                                                                                      trend)}))\n                                                                                               (sort-by :trend)\n                                                                                               (map-indexed (fn [ix m] {:region   (:region m)\n                                                                                                                        :position (inc ix)\n                                                                                                                        :trend    (:trend trend)})))}\n\n                       household-waste-derivation-percent-recycled-positions {:latest-positions (->> household-waste-derivation-percent-recycled\n                                                                                                     (remove #(= \"Scotland\" (:region %)))\n                                                                                                     (filter #(= latest-year (:year %)))\n                                                                                                     (sort-by :percentage)\n                                                                                                     reverse\n                                                                                                     (map-indexed (fn [ix m] {:region   (:region m)\n                                                                                                                              :position (inc ix)\n                                                                                                                              :year     latest-year})))\n                                                                              :trend-positions  (->> household-waste-derivation-percent-recycled\n                                                                                                     (group-by :region)\n                                                                                                     (map (fn [[region coll]] {:region region\n                                                                                                                               :trend  (->> coll\n                                                                                                                                            (map #(vector (double (:year %)) (:percentage %)))\n                                                                                                                                            trend)}))\n                                                                                                     (sort-by :trend)\n                                                                                                     reverse\n                                                                                                     (map-indexed (fn [ix m] {:region   (:region m)\n                                                                                                                              :position (inc ix)\n                                                                                                                              :trend    (:trend trend)})))}]\n\n                      (reset! household-waste-derivation-generation-holder household-waste-derivation-generation)\n                      (reset! household-waste-derivation-percent-recycled-holder household-waste-derivation-percent-recycled)\n                      (reset! household-waste-derivation-management-holder household-waste-derivation-management)\n                      (reset! household-waste-derivation-composition-holder household-waste-derivation-composition)\n                      (reset! household-waste-derivation-generation-positions-holder household-waste-derivation-generation-positions)\n                      (reset! household-waste-derivation-percent-recycled-positions-holder household-waste-derivation-percent-recycled-positions)))))\n\n\n(defn maybe-calc-household-co2e-derivations []\n      (let [household-co2e @household-co2e-holder\n            population @population-holder]\n\n           (when (and (some? household-co2e)\n                      (some? population))\n                 (js/console.log \"calculating household-co2e-derivations\")\n\n                 (let [;; Prep for the per citizen calculation\n                       population-for-lookup (group-by (juxt :region :year) population)\n                       lookup-population (fn [region year] (-> population-for-lookup (get [region year]) first :population))\n\n                       ;; Calculate the per citizen values\n                       household-co2e-derivation-generation (map (fn [{:keys [region year tonnes]}] {:region region\n                                                                                                     :year   year\n                                                                                                     :tonnes (double (/ tonnes (lookup-population region year)))})\n                                                                 household-co2e)\n\n                       ;; Calculate positions\n                       latest-year (->> household-co2e\n                                        (map :year)\n                                        (apply max))\n                       household-co2e-derivation-generation-positions {:latest-positions (->> household-co2e-derivation-generation\n                                                                                              (remove #(= \"Scotland\" (:region %)))\n                                                                                              (filter #(= latest-year (:year %)))\n                                                                                              (sort-by :tonnes)\n                                                                                              (map-indexed (fn [ix m] {:region   (:region m)\n                                                                                                                       :position (inc ix)\n                                                                                                                       :year     latest-year})))\n                                                                       :trend-positions  (->> household-co2e-derivation-generation\n                                                                                              (remove #(= \"Scotland\" (:region %)))\n                                                                                              (group-by :region)\n                                                                                              (map (fn [[region coll]] {:region region\n                                                                                                                        :trend  (->> coll\n                                                                                                                                     (map #(vector (double (:year %)) (:tonnes %)))\n                                                                                                                                     trend)}))\n                                                                                              (sort-by :trend)\n                                                                                              (map-indexed (fn [ix m] {:region   (:region m)\n                                                                                                                       :position (inc ix)\n                                                                                                                       :trend    (:trend trend)})))}]\n\n                      (reset! household-co2e-derivation-generation-holder household-co2e-derivation-generation)\n                      (reset! household-co2e-derivation-generation-positions-holder household-co2e-derivation-generation-positions)))))\n\n\n(defn maybe-calc-business-waste-by-region-derivations []\n      (let [business-waste-by-region @business-waste-by-region-holder]\n\n           (when (some? business-waste-by-region))\n           (js/console.log \"calculating business-waste-by-region-derivations\")\n\n           (let [region-count (->> business-waste-by-region\n                                   (map :region)\n                                   distinct\n                                   count)\n\n                 ;; Roll-up to get values for (region, year) pairs\n                 business-waste-by-region-derivation-generation0 (data-shaping/rollup-business-waste-by-region-materials business-waste-by-region)\n\n                 ;; Scotland (total) -> Scotland average\n                 business-waste-by-region-derivation-generation (map (fn [{:keys [region year tonnes] :as original}] (if (= \"Scotland\" region)\n                                                                                                                       {:region \"Scotland average\"\n                                                                                                                        :year   year\n                                                                                                                        :tonnes (double (/ tonnes region-count))}\n                                                                                                                       original))\n                                                                     business-waste-by-region-derivation-generation0)\n\n                 ;; No actual deriving needed for the composition\n                 business-waste-by-region-derivation-composition business-waste-by-region]\n\n                (reset! business-waste-by-region-derivation-generation-holder business-waste-by-region-derivation-generation)\n                (reset! business-waste-by-region-derivation-composition-holder business-waste-by-region-derivation-composition))))\n\n\n(defn maybe-calc-waste-site-derivations []\n      (let [waste-site @waste-site-holder]\n\n           (when (some? waste-site))\n           (js/console.log \"calculating waste-site-derivations\")\n\n           (let [waste-site-derivation (data-shaping/count-waste-sites-per-category-per-region waste-site)]\n\n                (reset! waste-site-derivation-holder waste-site-derivation))))\n\n;; -------------------\n\n;; Watch for data updates\n\n(add-watch population-holder :household-waste-derivations-dependency\n           (fn [_key _atom old-state new-state]\n               (when new-state\n                     (maybe-calc-household-waste-derivations))))\n\n(add-watch population-holder :household-co2e-derivations-dependency\n           (fn [_key _atom old-state new-state]\n               (when new-state\n                     (maybe-calc-household-co2e-derivations))))\n\n(add-watch household-waste-holder :household-waste-derivations-dependency\n           (fn [_key _atom old-state new-state]\n               (when new-state\n                     (maybe-calc-household-waste-derivations))))\n\n(add-watch household-co2e-holder :household-co2e-derivations-dependency\n           (fn [_key _atom old-state new-state]\n               (when new-state\n                     (maybe-calc-household-co2e-derivations))))\n\n(add-watch business-waste-by-region-holder :business-waste-by-region-derivations-dependency\n           (fn [_key _atom old-state new-state]\n               (when new-state\n                     (maybe-calc-business-waste-by-region-derivations))))\n\n(add-watch waste-site-holder :waste-site-derivations-dependency\n           (fn [_key _atom old-state new-state]\n               (when new-state\n                     (maybe-calc-waste-site-derivations))))\n\n\n"]}