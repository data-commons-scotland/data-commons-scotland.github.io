{"version":3,"sources":["dcs/prototype_6/browser.cljs"],"mappings":";AAWA,AAAA,AAAMA;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMmD,AAAA,AAACC,AAC5B,AAAA,AAACA;;AAEzB,AAAA,AAAMC;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAKwB,AAAA,AAACD,AACD,AAAA,AAACA;;AAEzB,AAAA,AAAME;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA;;AAKA,AAAA,AAAMC;AAAN,AAAA,AAAA,AAAA,AAGQC,AACD,AAAA,AAAAC,AAAMC,AAAOC;AACPC,AAAE,AAAA,AAACC,AAA0BH;AAC7BI,AAAK,AAAAC,AAAI,AAAA,AAAO,AAAA,AAAOL;AAAlB,AAAA,AAAAK;AAAAA;;AACIC;;;AAHf,AAIK,AAAA,AAACH,AAAyBC;;AAJ/B,AAAA,AAAAL,AAKMK,AAAMH;AATnB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;AAaA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKM,AAGQD,AAIAE,AAGAb,AAGAC;AAGb,AAAA,AAAuBa;AAAvB,AAEM,AAAA,AAACN;;AACD,AAACO,AACC,AAAA,AAAA,AAAA,AAAA,AAACC,AAAUJ,AAAyBK,AACpC,AAAKC;AAAL,AAAQ,AAACC,AAAOb,AAAkBY;AAFpC,AAAA,AAAA;;AAIA,AAAA,AAACV;;AACD,AAAA,AAACY,AAAUlB,AAAc,AAAA,AAAiBmB;;AAEhD,AAAA,AAAeC;AAAf,AAKM,AAACC;;AACD,AAACT;;;AAGP,AAAA,AAAwBU;AAAxB,AAEM,AAAA,AAAChB","names":["dcs.prototype-6.browser/view0","reitit.frontend.easy.href","dcs.prototype-6.browser/view1","dcs.prototype-6.browser/todo","dcs.prototype-6.browser/current-page","dcs.prototype-6.ui-nav/navbar","cljs.core/deref","route","dcs.prototype-6.state/route-match","_","js/console.log","view","or__4126__auto__","dcs.prototype-6.home-page/create","dcs.prototype-6.browser/routes","dcs.prototype-6.ui-root/app","dcs.prototype-6.browser/start","reitit.frontend.easy/start!","reitit.frontend.router","reitit.coercion.spec/coercion","m","cljs.core/reset!","reagent.core.render","js/document","dcs.prototype-6.browser/init","dcs.prototype-6.state/load-data","dcs.prototype-6.browser/stop"],"sourcesContent":["(ns dcs.prototype-6.browser\n  (:require [reagent.core :as r]\n            [reitit.frontend :as rf]\n            [reitit.coercion.spec :as rss]\n            [reitit.frontend.easy :as rfe]\n            [dcs.prototype-6.state :as state]\n            [dcs.prototype-6.ui-nav :as ui-nav]\n            [dcs.prototype-6.ui-root :as ui-root]\n            [dcs.prototype-6.home-page :as home-page]))\n\n\n(defn view0\n      []\n      [:div\n       [:h1 \"VIEW - HOME\"]\n       [:div.content.is-red [:p \"Some text.\"]]\n       [:ul\n        [:li [:a.button.is-primary.is-small {:href (rfe/href ::dashboard-page)} \"Dashboard page\"]]\n        [:li [:a {:href (rfe/href ::route1-page)} \"Route1 page\"]]]])\n\n(defn view1\n      []\n      [:div\n       [:h1 \"VIEW - 1\"]\n       [:ul\n        [:li [:a {:href (rfe/href ::home-page)} \"Home page\"]]\n        [:li [:a {:href (rfe/href ::dashboard-page)} \"Dashboard page\"]]]])\n\n(defn todo\n      []\n      [:div\n       [:h1 \"TODO\"]])\n\n(defn current-page\n      []\n      [:div\n       [ui-nav/navbar]\n       (let [route @state/route-match\n             _ (js/console.log \"route = \" route)\n             view (or (:view (:data route))\n                      home-page/create)]\n            (js/console.log \"view = \" view)\n            [view @state/route-match])\n       [:footer.footer\n        [:p \"Built by the \" [:strong \"Data Commons Scotland\"] \" project.\"]]])\n\n(def routes\n  [[\"/\"\n    {:name ::home-page\n     :view   home-page/create}]\n   [\"/dashboard\"\n    {:name ::dashboard-page\n     ;;:parameters {:path {:region string?}}\n     :view   ui-root/app}]\n   [\"/route1\"\n    {:name ::route1-page\n     :view   view1}]\n   [\"/todo\"\n    {:name ::todo-page\n     :view   todo}]])\n\n;; called by init and after code reloading finishes\n(defn ^:dev/after-load start\n      []\n      (js/console.log \"Starting router\")\n      (rfe/start!\n        (rf/router routes {:data {:coercion rss/coercion}})\n        (fn [m] (reset! state/route-match m))\n        {:use-fragment true})  ;; So URLs looking like  base-path/#/other/paths\n      (js/console.log \"Starting render\")\n      (r/render [current-page] (.getElementById js/document \"app\")))\n\n(defn ^:export init\n      []\n      ;; init is called ONCE when the page loads\n      ;; this is called in the index.html and must be exported\n      ;; so it is available even in :advanced release builds\n      (state/load-data)\n      (start))\n\n;; this is called before any code is reloaded\n(defn ^:dev/before-load stop\n      []\n      (js/console.log \"stop\"))"]}