{"version":3,"sources":["dcs/prototype_6/view/fairshare/per_material.cljs"],"mappings":";AAMA,AAAA,AAAMA,AACCC,AAAKC;AADZ,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMmBA,AACSD;;AAgC5B,AAAA,AAAME,AAAQC,AAASC;AAAvB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAIWC,AAAa,AAAA,AAACN,AAAwBI,AACtCG,AASAD,AAAa,AAAA,AAAA,AAAA,AAAA,AAAA,AAACE,AAAS,AAAA,AAACR,AAAwBK,AAChDE;;AAQX,AAAA,AAAMG;AAAN,AAAA,AAAA,AAAAD,AAAA,AAAAA,AACON,AACCQ,AACAC","names":["dcs.prototype-6.view.fairshare.per-material/chart-spec-per-material","data","title","dcs.prototype-6.view.fairshare.per-material/charts","material","co2e","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/assoc-in","cljs.core/deref","dcs.prototype-6.view.fairshare.per-material/root","dcs.prototype-6.state/fairshare-derivation-material-cursor","dcs.prototype-6.state/fairshare-derivation-co2e-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.fairshare.per-material\n  (:require\n    [oz.core :as oz]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]))\n\n(defn chart-spec-per-material\n      [data title]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      370\n       :height     200\n       :background \"#fff1e5\"\n       :title      title\n       :data       {:values data}\n       :transform  [{:timeUnit \"year\"\n                     :field    \"yyyy-MM-dd\"\n                     :as       \"year\"}\n                    {:aggregate [{:op    \"average\"\n                                  :field \"tonnes\"\n                                  :as    \"avg-tonnes\"}]\n                     :groupby   [\"material\"]}]\n       :mark       {:type                 \"bar\"\n                    :cornerRadiusTopLeft  3\n                    :cornerRadiusTopRight 3}\n       :encoding   {:x       {:title \"material\"\n                              :field \"material\"\n                              :type  \"nominal\"\n                              :axis  {:labelAngle 60\n                                      :labelBound 65}\n                              :sort  {:field \"avg-tonnes\"\n                                      :order \"descending\"}}\n                    :y       {:title \"average tonnes per year\"\n                              :field \"avg-tonnes\"\n                              :type  \"quantitative\"}\n                    :color   {:value \"#A2CAC1\"}\n                    :tooltip [{:title \"material\"\n                               :field \"material\"\n                               :type  \"nominal\"}\n                              {:title \"tonnes\"\n                               :field \"avg-tonnes\"\n                               :type  \"quantitative\"\n                               :format \".3f\"}]}})\n\n\n\n(defn charts [material co2e]\n       [:div\n        [:div.columns\n         [:column\n          [oz/vega-lite (chart-spec-per-material material \"Graph 2: Weight per material\")\n           util/vega-embed-opts]\n          ]\n         [:column\n          [:div.m-4.content\n           [:p \"Graph 2 depicts the (average) tonnes per year of each (category of) material reused.\"\n            \" Textiles & footwear is by far the highest, followed by books then aggregates.\"]]\n          ]]\n        [:div.columns\n         [:column\n          [oz/vega-lite (assoc-in (chart-spec-per-material co2e \"Graph 3: CO2e per material\") [:encoding :color :value] \"#BF5748\")\n           util/vega-embed-opts]]\n         [:column\n          [:div.m-4.content\n           [:p \"Graph 3 has the same basis as the previous one but this time it orders the material amounts \"\n            \" by their CO\" [:sub \"2\"] \"e impacts.\"]\n           [:p \"Tonne-for-tonne, textiles & footwear accounts more CO\" [:sub \"2\"] \"e\"\n            \" than any of the other materials, so it is good that textiles & footwear component is (by weight) the most reused of the materials!\"]]]]])\n\n(defn root []\n      [charts\n       @state/fairshare-derivation-material-cursor\n       @state/fairshare-derivation-co2e-cursor])"]}