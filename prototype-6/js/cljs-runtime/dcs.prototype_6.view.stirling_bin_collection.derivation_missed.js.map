{"version":3,"sources":["dcs/prototype_6/view/stirling_bin_collection/derivation_missed.cljs"],"mappings":";AAOA,AAAA,AAAMA,AAAYC,AAAOC;AAAzB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMiCA;;AAmBjC,AAAA,AAAMC,AAAOC;AAAb,AACM,AACMC,AAAmB,AAAA,AAAAC,AAACC;AAAD,AAAM,AAAAD,AAAA,AAACE,AAAc,AAACC,AAAc,AAAA,AAAAH,AAAU,AAAA,AAAAA;AACzCF;AAF9B,AAAA,AAAA,AAAA,AAIOM,AAAa,AAAA,AAACV,AAAyBK,AACvCM;;AAEb,AAAA,AAAME;AAAN,AAAA,AAAA,AAAAD,AACOT,AACCW","names":["dcs.prototype-6.view.stirling-bin-collection.derivation-missed/chart-spec","_title","data","dcs.prototype-6.view.stirling-bin-collection.derivation-missed/chart","derivation-missed","derivation-missed'","p1__31932#","cljs.core.map","cljs.core.assoc","dcs.prototype-6.util/date-str","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/deref","dcs.prototype-6.view.stirling-bin-collection.derivation-missed/root","dcs.prototype-6.state/stirling-bin-collection-derivation-missed-bins-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.stirling-bin-collection.derivation-missed\n  (:require\n    [oz.core :as oz]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]))\n\n\n(defn chart-spec [_title data]\n           {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n            ;;:title      title\n            :width      250\n            :height     100\n            :background \"floralwhite\"\n            :data       {:values data}\n            :mark       {:type \"bar\"}\n            :selection  {:my {:type   \"multi\"\n                              :fields [\"tonnes\"]\n                              :bind   \"legend\"}}\n            :encoding   {:x       {:field \"date\" :type \"temporal\"\n                                   :timeUnit \"yearquarter\"\n                                   :axis {:title \"year quarter\"\n                                          :labelAngle 60\n                                          :labelOffset 10\n                                          :labelBound 25}}\n                         :y       {:field \"tonnes\" :type \"quantitative\"\n                                   :scale {:zero false} :axis {:title \"tonnes\"}}\n                         :color   {:value \"#BF5748\"}\n                         :opacity {:condition {:selection \"my\" :value 1}\n                                   :value     0.2}\n                         :tooltip [{:field \"date\" :type \"temporal\"}\n                                   {:field \"tonnes\" :type \"quantitative\"}]}})\n\n(defn chart [derivation-missed]\n      (let [;; construct a date field for Vega\n            derivation-missed' (map #(assoc % :date (util/date-str (:year %) (:quarter %)))\n                                    derivation-missed)]\n           [:div\n            [oz/vega-lite (chart-spec \"Missed bins\" derivation-missed')\n             util/vega-embed-opts]]))\n\n(defn root []\n      [chart\n       @state/stirling-bin-collection-derivation-missed-bins-cursor])"]}