{"version":3,"sources":["dcs/prototype_6/view/household_waste_analysis/disposal.cljs"],"mappings":";AAMA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKA;AAEL,AAAA,AAAMC,AACCC;AADP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAI4BA,AAMSF;;AA4BrC,AAAA,AAAMG,AAAQC;AAAd,AACM,AAAMF,AAAWE;AAAjB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMSC,AAAa,AAACJ,AAAWC,AACzBI;;AAWf,AAAA,AAAME;AAAN,AAAA,AAAA,AAAAD,AACOJ,AACCM","names":["dcs.prototype-6.view.household-waste-analysis.disposal/stratum-labels","dcs.prototype-6.view.household-waste-analysis.disposal/chart-spec","chart-data","dcs.prototype-6.view.household-waste-analysis.disposal/charts","derivation","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/deref","dcs.prototype-6.view.household-waste-analysis.disposal/root","dcs.prototype-6.state/household-waste-analysis-derivation-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.household-waste-analysis.disposal\n  (:require\n    [oz.core :as oz]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]))\n\n(def stratum-labels [\"urban \u00a3\" \"urban \u00a3\u00a3\" \"urban \u00a3\u00a3\u00a3\" \"rural \u00a3/\u00a3\u00a3\" \"rural \u00a3\u00a3\u00a3\"])\n\n(defn chart-spec\n      [chart-data]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :background \"#fff1e5\"\n       :data       {:values chart-data}\n       :transform  [{:calculate \"datum.stream + (datum.stream == datum.idealStream ? ' - appropriate' : ' - inappropriate')\" :as \"stream\"}\n                    {:aggregate [{:op \"sum\" :field \"kgPerHhPerWk\" :as \"kgPer2Wks\"}]\n                     :groupby   [\"stratum\" \"stream\"]}\n                    {:calculate \"datum.kgPer2Wks / 2\" :as \"kg\"}] ;; to average over the 2 phases\n       :facet      {:column {:field  \"stratum\" :type \"nominal\"\n                             :sort   stratum-labels\n                             :header {:title \"household type (location type & council tax band)\"\n                                      :titleOrient \"bottom\"\n                                      :labelPadding -170}}} ;; hack to workaround labelOrient problem\n       :spec       {:width  100\n                    :height 150\n                    :mark     {:type \"bar\"}\n                    :encoding {:x           {:field \"stream\" :type \"nominal\"\n                                             :axis  nil}\n                               :y           {:field \"kg\" :type \"quantitative\"\n                                             :axis  {:title \"average kg/hh/wk\"}}\n                               :color {:field \"stream\" :type \"nominal\"\n                                       :scale {:domain [\"grey bin - appropriate\"\n                                                        \"grey bin - inappropriate\"\n                                                        \"recycling bin - appropriate\"\n                                                        \"recycling bin - inappropriate\"]\n                                               :range [\"#928E85\"\n                                                       \"#BF5748\"\n                                                       \"#7FD1AE\"\n                                                       \"#FD8D58\"]}\n                                       :legend {:title \"disposal\"}}\n                               :tooltip     [{:field \"stratum\" :type \"nominal\" :title \"house type (location & CTax)\"}\n                                             {:field \"stream\" :type \"nominal\" :title \"disposal\"}\n                                             {:field \"kg\" :type \"quantitative\" :title \"avg kg per household per wk\"}]}}})\n\n\n\n\n(defn charts [derivation]\n      (let [chart-data derivation]\n\n           [:div.tile.is-ancestor\n            [:div.tile.is-parent\n\n             [:div.tile.is-child\n              [oz/vega-lite (chart-spec chart-data)\n               util/vega-embed-opts]]\n\n             [:div.tile.is-child.content\n              [:blockquote\n               [:p \"TODO:\"]\n               [:ul\n                [:li \"Say that the graph suggested that the majority of grey bin waste should be disposed of via a different means.\"]]]\n              ]\n\n             ]]))\n\n(defn root []\n      [charts\n       @state/household-waste-analysis-derivation-cursor])\n"]}