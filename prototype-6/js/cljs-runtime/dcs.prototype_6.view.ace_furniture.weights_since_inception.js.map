{"version":3,"sources":["dcs/prototype_6/view/ace_furniture/weights_since_inception.cljs"],"mappings":";AAUA,AAAA,AAAMA,AACCC;AADP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAM4BA,AACT,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACC,AAAKC,AAWIC;;AAM7B,AAAA,AAAMC,AACCJ;AADP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAM4BA,AACTE,AASUC;;AAM7B,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKE;AAIL,AAAA,AAAMC,AAAaC;AAAnB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAI+D,AAAKC;AAAL,AAAQ,AAAA,AAAA,AAACC,AAAcD;AAJtF,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAKqD,AAAKA;AAAL,AAAQ,AAAA,AAAA,AAACC,AAAcD;AAL5E,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAUQH,AAQCK,AAAa,AAACX,AAA0BQ,AAASI,AAMlDN,AACCK,AAAa,AAACN,AAAsBG,AAASI;;AAOtD,AAAA,AAAME;AAAN,AAAA,AAAA,AAAAD,AACON,AACCQ","names":["dcs.prototype-6.view.ace-furniture.weights-since-inception/chart-spec-category-level","data","cljs.core.conj","dcs.prototype-6.view.ace-furniture.shared/transform-spec","dcs.prototype-6.view.ace-furniture.shared/color-spec","dcs.prototype-6.view.ace-furniture.weights-since-inception/chart-spec-item-level","dcs.prototype-6.view.ace-furniture.weights-since-inception/hint","dcs.prototype-6.view.ace-furniture.weights-since-inception/tabbed-area","weights","e","dcs.prototype-6.util/open-tab","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/deref","dcs.prototype-6.view.ace-furniture.weights-since-inception/root","dcs.prototype-6.state/ace-furniture-weights-derivation-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.ace-furniture.weights-since-inception\n  (:require\n    [reagent.core :as r]\n    [oz.core :as oz]\n    [goog.string :as gstring]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]\n    [dcs.prototype-6.view.ace-furniture.shared :as shared]))\n\n\n(defn chart-spec-category-level\n      [data]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      500\n       :height     400\n       :background \"#fff1e5\"\n       :data       {:values data}\n       :transform  (conj shared/transform-spec\n                         {:aggregate [{:op \"sum\" :field \"weight\" :as \"weight\"}]\n                          :groupby [\"period\" \"category\"]})\n       :mark       {:type \"bar\"\n                    :cornerRadiusTopLeft  3\n                    :cornerRadiusTopRight 3}\n       :encoding   {:y       {:field \"category\" :type \"nominal\"\n                              :sort {:field \"weight\" :order \"descending\"}}\n                    :x       {:title \"weight\"\n                              :field \"weight\" :type \"quantitative\"\n                              :axis {:title \"total kg\" :orient \"top\"}}\n                    :color   shared/color-spec\n                    :tooltip [{:title \"category\" :field \"category\" :type \"nominal\"}\n                              {:title \"period\" :field \"period\" :type \"nominal\"}\n                              {:title \"kg\" :field \"weight\" :type \"quantitative\"}]}})\n\n\n(defn chart-spec-item-level\n      [data]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      500\n       :height     1000\n       :background \"#fff1e5\"\n       :data       {:values data}\n       :transform  shared/transform-spec\n       :mark       {:type \"bar\"\n                    :cornerRadiusTopLeft  3\n                    :cornerRadiusTopRight 3}\n       :encoding   {:y       {:title \"sub-category\" :field \"item\" :type \"nominal\"\n                              :sort {:field \"weight\" :order \"descending\"}}\n                    :x       {:title \"weight\"\n                              :field \"weight\" :type \"quantitative\"\n                              :axis {:title \"total kg\" :orient \"top\"}}\n                    :color   shared/color-spec\n                    :tooltip [{:title \"category\" :field \"category\" :type \"nominal\"}\n                              {:title \"sub-category\" :field \"item\" :type \"nominal\"}\n                              {:title \"period\" :field \"period\" :type \"nominal\"}\n                              {:title \"kg\" :field \"weight\" :type \"quantitative\"}]}})\n\n(def hint [:div.content.is-small.has-text-info-dark\n           [:p \"A coloured segment of a bar represents an \" [:em \"accounting\"] \" period.\"\n            \" Click on it to see further detail.\"]])\n\n(defn tabbed-area [weights]\n      [:div\n       [:div.tabs\n        [:ul\n         [:li.tab-weights-since-inception.is-active {:on-click (fn [e] (util/open-tab e \"weights-since-inception\" \"category-level\"))} [:a \"Less detail\"]]\n         [:li.tab-weights-since-inception {:on-click (fn [e] (util/open-tab e \"weights-since-inception\" \"item-level\"))} [:a \"More detail\"]]]]\n\n\n       [:div#category-level-weights-since-inception.content.tab-content-weights-since-inception\n        [:p \"The \" [:b \"total weight\"] \" of the items of furniture sold in each \" [:b \"category\"] \".\"]\n        hint\n        [:div.has-text-danger-dark\n         [:p \"For the concern of pollution avoidance, the weight of furniture is more representative than the number of items.\"\n          \" So weights are depicted in the graph below.\"\n          \" The categories \"[:span.has-text-grey \"Large Household Appliances\"] \" and \"\n          [:span.has-text-grey \"Cooling Appliances\"] \" contain weighty items such as washing machines and fridge-freezers\"\n          \" so it is unsurprising that those two categories feature higher up this weights chart [below] than they did\"\n          \" in the counts chart [above].\"]]\n        [oz/vega-lite (chart-spec-category-level weights) util/vega-embed-opts]\n        ]\n\n\n       [:div#item-level-weights-since-inception.content.tab-content-weights-since-inception {:style {:display \"none\"}}\n        [:p \"The \" [:b \"total weight\"] \" of the items of furniture sold in each \" [:b \"sub-category\"] \".\"]\n        hint\n        [oz/vega-lite (chart-spec-item-level weights) util/vega-embed-opts]\n        ]\n\n\n       ]\n      )\n\n(defn root []\n      [tabbed-area\n       @state/ace-furniture-weights-derivation-cursor])"]}