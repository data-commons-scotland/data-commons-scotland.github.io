{"version":3,"sources":["dcs/prototype_6/view/stirling_community_food/footfall.cljs"],"mappings":";AAOA,AAAA,AAAMA,AACCC,AAAKC;AADZ,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMcA,AACcD;;AAgB5B,AAAA,AAAME,AACCF,AAAKC;AADZ,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMUA,AACcD;;AAexB,AAAA,AAAMG,AACCH,AAAKC;AADZ,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMcA,AACcD;;AAoB5B,AAAA,AAAMI,AAAQC;AAAd,AACM,AAAMC,AAAWD;AAAjB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAQUE,AAAa,AAAA,AAACR,AAAmBO,AACjCE,AAaAD,AAAa,AAAA,AAACL,AAAqBI,AACnCE,AAEAD,AAAa,AAAA,AAACJ,AAAyBG,AACvCE;;AAEhB,AAAA,AAAME;AAAN,AAAA,AAAA,AAAAD,AACOL,AACCO","names":["dcs.prototype-6.view.stirling-community-food.footfall/chart-spec-per-day","data","title","dcs.prototype-6.view.stirling-community-food.footfall/chart-spec-per-month","dcs.prototype-6.view.stirling-community-food.footfall/chart-spec-day-per-month","dcs.prototype-6.view.stirling-community-food.footfall/charts","derivation","chart-data","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/deref","dcs.prototype-6.view.stirling-community-food.footfall/root","dcs.prototype-6.state/stirling-community-food-footfall-derivation-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.stirling-community-food.footfall\n  (:require\n    [oz.core :as oz]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]))\n\n\n(defn chart-spec-per-day\n      [data title]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      370\n       :height     200\n       :background \"floralwhite\"\n       :title title\n       :data       {:values data}\n       :transform  [{:aggregate [{:op \"sum\" :field \"count\" :as \"footfall\"}]\n                     :groupby [\"day\"]}]\n       :mark       {:type \"bar\"\n                    :cornerRadiusTopLeft  3\n                    :cornerRadiusTopRight 3}\n       :encoding   {:x       {:field \"day\" :type \"nominal\"\n                              :axis {:title nil\n                                     :labelAngle 60\n                                     :labelBound 45}\n                              :sort [\"Sun\" \"Mon\" \"Tue\" \"Wed\" \"Thu\" \"Fri\" \"Sat\"]}\n                    :y       {:field \"footfall\" :type \"quantitative\"}\n                    :color {:value \"#8DD9E3\"}\n                    :tooltip [{:field \"day\" :type \"nominal\"}\n                              {:field \"footfall\" :type \"quantitative\"}]}})\n\n(defn chart-spec-per-month\n      [data title]\n  {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n   :width      370\n   :height     200\n   :background \"floralwhite\"\n   :title title\n   :data       {:values data}\n   :transform  [{:timeUnit \"yearmonth\" :field \"yyyy-MM-dd\" :as \"month\"}\n                {:aggregate [{:op \"sum\" :field \"count\" :as \"footfall\"}]\n                 :groupby [\"month\"]}]\n   :mark       {:type \"line\"\n                :point {:filled false :fill \"floralwhite\"}}\n   :encoding   {:x       {:field \"month\" :type \"temporal\"\n                          :axis {:format \"%b %y\"\n                                 :labelAngle 60\n                                 :labelBound 45}}\n                :y       {:field \"footfall\" :type \"quantitative\"}\n                :color   {:value \"#8DD9E3\"}\n                :tooltip [{:field \"month\" :type \"temporal\" :format \"%b %Y\"}\n                          {:field \"footfall\" :type \"quantitative\"}]}})\n\n(defn chart-spec-day-per-month\n      [data title]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      370\n       :height     200\n       :background \"floralwhite\"\n       :title title\n       :data       {:values data}\n       :transform  [{:timeUnit \"yearmonth\" :field \"yyyy-MM-dd\" :as \"month\"}\n                    {:aggregate [{:op \"sum\" :field \"count\" :as \"footfall\"}]\n                     :groupby [\"month\" \"day\"]}]\n       :mark       {:type \"line\"\n                    :point {:filled false :fill \"floralwhite\"}}\n       :encoding   {:x       {:field \"month\" :type \"temporal\"\n                              :axis {:format \"%b %y\"\n                                     :labelAngle 60\n                                     :labelBound 45}}\n                    :y       {:field \"footfall\" :type \"quantitative\" :scale {:zero false}}\n                    :color   {:field \"day\" :type \"nominal\"\n                              :sort [\"Sun\" \"Mon\" \"Tue\" \"Wed\" \"Thu\" \"Fri\" \"Sat\"]\n                              :scale {:scheme \"tableau20\"}\n                              :legend {:orient \"bottom\"}}\n                    :tooltip [{:field \"day\" :type \"nominal\"}\n                              {:field \"month\" :type \"temporal\" :format \"%b %Y\"}\n                              {:field \"footfall\" :type \"quantitative\"}]}})\n\n\n(defn charts [derivation]\n      (let [chart-data derivation]\n\n           [:div.tile.is-ancestor\n\n            [:div.tile.is-6\n             [:div.tile.is-vertical.is-parent\n\n              [:div.tile.is-child\n               [oz/vega-lite (chart-spec-per-day chart-data \"Graph 8: Footfall per day-of-the-week\")\n                util/vega-embed-opts]]\n              [:div.tile.is-child.content\n               [:p \"Graph 8 shows that there is\n               no significant differences in footfall between days of the week.\"]\n               [:p \"Graph 9 provides a month-by-month breakdown of footfall.\"]\n               [:p \"Graph 10 provides a month-by-month breakdown\n               of the footfall per day-of-the-week. There is no discernible\n               correlation between a day-of-the-week and a month-of-the-year.\"]]]]\n\n            [:div.tile\n             [:div.tile.is-vertical.is-parent\n\n              [:div.tile.is-child\n               [oz/vega-lite (chart-spec-per-month chart-data \"Graph 9: Footfall per month\")\n                util/vega-embed-opts]]\n              [:div.tile.is-child\n               [oz/vega-lite (chart-spec-day-per-month chart-data \"Graph 10: Footfall per day-of-the-week, per month\")\n                util/vega-embed-opts]]]]]))\n\n(defn root []\n      [charts\n       @state/stirling-community-food-footfall-derivation-cursor])"]}