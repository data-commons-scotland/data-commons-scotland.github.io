{"version":3,"sources":["dcs/prototype_6/view/fairshare/amounts_reused.cljs"],"mappings":";AAQA,AAAA,AAAMA,AACCC;AADP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAM4BA;;AAoB5B,AAAA,AAAMC,AACCD;AADP,AAEM,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACE,AAAS,AAACH,AAAsBC;;AAGvC,AAAA,AAAMG,AAAQC;AAAd,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAOWC,AAAa,AAACN,AAAsBK,AACpCE,AAEAD,AAAa,AAACJ,AAAiCG,AAC/CE;;AAcX,AAAA,AAAME;AAAN,AAAA,AAAA,AAAAD,AACOJ,AACCM","names":["dcs.prototype-6.view.fairshare.amounts-reused/chart-spec-per-season","data","dcs.prototype-6.view.fairshare.amounts-reused/chart-spec-per-season-non-linear","cljs.core/assoc-in","dcs.prototype-6.view.fairshare.amounts-reused/charts","donations","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/deref","dcs.prototype-6.view.fairshare.amounts-reused/root","dcs.prototype-6.state/fairshare-material-derivation-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.fairshare.amounts-reused\n  (:require\n    [reagent.core :as r]\n    [oz.core :as oz]\n    [goog.string :as gstring]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]))\n\n(defn chart-spec-per-season\n      [data]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      400\n       :height     250\n       :background \"#fff1e5\"\n       :data       {:values data}\n       :transform  [{:timeUnit \"yearmonth\" :field \"yyyy-MM-dd\" :as \"month\"}\n                    {:aggregate [{:op \"sum\" :field \"tonnes\" :as \"tonnes\"}]\n                     :groupby   [\"month\" \"material\"]}]\n       :mark       {:type  \"line\"\n                    :point {:filled false :fill \"#fff1e5\"}}\n       :encoding   {:x       {:field \"month\" :type \"temporal\"\n                              :axis  {:format     \"%b %y\"\n                                      :labelAngle 60\n                                      :labelBound 65\n                                      :tickCount  {:interval \"month\" :step 3 :start 0}}}\n                    :y       {:field \"tonnes\" :type \"quantitative\"}\n                    :color   {:field \"material\" :type \"nominal\"\n                              :scale {:scheme \"tableau20\"}\n                              ;:legend {:orient \"bottom\" :columns 4}\n                              }\n                    :tooltip [{:field \"material\" :type \"nominal\"}\n                              {:field \"month\" :type \"temporal\" :format \"%b %y\"}\n                              {:field \"tonnes\" :type \"quantitative\"}]}})\n\n(defn chart-spec-per-season-non-linear\n      [data]\n      (assoc-in (chart-spec-per-season data) [:encoding :y :scale] {:type \"pow\" :exponent 0.25}))\n\n\n(defn charts [donations]\n      [:div.tile.is-ancestor\n\n       [:div.tile.is-8\n        [:div.tile.is-vertical.is-parent\n\n         [:div.tile.is-child\n          [oz/vega-lite (chart-spec-per-season donations)\n           util/vega-embed-opts]]\n         [:div.tile.is-child\n          [oz/vega-lite (chart-spec-per-season-non-linear donations)\n           util/vega-embed-opts]]]]\n\n       [:div.tile\n        [:div.tile.is-vertical.is-parent\n\n         [:div.tile.is-child.content\n          [:blockquote\n           [:p \"TODO:\"]\n           [:ul\n            [:li \"The graph shows ...ETC ETC\"]\n            ]]]]]\n\n       ])\n\n(defn root []\n      [charts\n       @state/fairshare-material-derivation-cursor])"]}