goog.provide('dcs.prototype_6.view.ace_furniture.trends');
dcs.prototype_6.view.ace_furniture.trends.chart_spec_category_level = (function dcs$prototype_6$view$ace_furniture$trends$chart_spec_category_level(data){
return cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"schema","schema",-1582001791),new cljs.core.Keyword(null,"transform","transform",1381301764),new cljs.core.Keyword(null,"columns","columns",1998437288),new cljs.core.Keyword(null,"facet","facet",-801327574),new cljs.core.Keyword(null,"background","background",-863952629),new cljs.core.Keyword(null,"bounds","bounds",1691609455),new cljs.core.Keyword(null,"spec","spec",347520401),new cljs.core.Keyword(null,"spacing","spacing",204422175),new cljs.core.Keyword(null,"data","data",-232669377)],["https://vega.github.io/schema/vega/v5.json",cljs.core.conj.cljs$core$IFn$_invoke$arity$2(dcs.prototype_6.view.ace_furniture.shared.transform_spec,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"calculate","calculate",-1224644403),"truncate(datum.category, 30)",new cljs.core.Keyword(null,"as","as",1148689641),"categorytruncated"], null)),(4),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"field","field",-1302436500),"categorytruncated",new cljs.core.Keyword(null,"type","type",1174270348),"nominal",new cljs.core.Keyword(null,"sort","sort",953465918),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"field","field",-1302436500),"trend",new cljs.core.Keyword(null,"op","op",-1882987955),"mean",new cljs.core.Keyword(null,"order","order",-1254677256),"descending"], null),new cljs.core.Keyword(null,"header","header",119441134),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"title","title",636505583),"category",new cljs.core.Keyword(null,"titlePadding","titlePadding",668470772),(30)], null)], null),"floralwhite","flush",new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"width","width",-384071477),(130),new cljs.core.Keyword(null,"height","height",1025178622),(50),new cljs.core.Keyword(null,"layer","layer",-1601820589),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"mark","mark",-373816345),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),"line",new cljs.core.Keyword(null,"point","point",1813198264),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"filled","filled",1908725116),false,new cljs.core.Keyword(null,"fill","fill",883462889),"#f2dfce"], null)], null),new cljs.core.Keyword(null,"encoding","encoding",1728578272),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",2099068185),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"field","field",-1302436500),"instant",new cljs.core.Keyword(null,"type","type",1174270348),"temporal",new cljs.core.Keyword(null,"axis","axis",-1215390822),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),null,new cljs.core.Keyword(null,"format","format",-1306924766),"%b %y",new cljs.core.Keyword(null,"labelAngle","labelAngle",-15299184),(90)], null)], null),new cljs.core.Keyword(null,"y","y",-1757859776),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"field","field",-1302436500),"avg-count",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative",new cljs.core.Keyword(null,"axis","axis",-1215390822),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"title","title",636505583),null], null),new cljs.core.Keyword(null,"scale","scale",-230427353),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),"sqrt"], null)], null),new cljs.core.Keyword(null,"color","color",1011675173),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"condition","condition",1668437652),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"test","test",577538877),"datum.trend >= 0",new cljs.core.Keyword(null,"value","value",305978217),"#00769C"], null),new cljs.core.Keyword(null,"value","value",305978217),"#B46E6F"], null),new cljs.core.Keyword(null,"tooltip","tooltip",-1809677058),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"category",new cljs.core.Keyword(null,"field","field",-1302436500),"category",new cljs.core.Keyword(null,"type","type",1174270348),"nominal"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"period",new cljs.core.Keyword(null,"field","field",-1302436500),"period",new cljs.core.Keyword(null,"type","type",1174270348),"nominal"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"total count for the period",new cljs.core.Keyword(null,"field","field",-1302436500),"period-count",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"avg count per month",new cljs.core.Keyword(null,"field","field",-1302436500),"avg-count",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"trend",new cljs.core.Keyword(null,"field","field",-1302436500),"trend",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative"], null)], null)], null)], null)], null)], null),(35),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"values","values",372645556),data], null)]);
});
dcs.prototype_6.view.ace_furniture.trends.chart_spec_item_level = (function dcs$prototype_6$view$ace_furniture$trends$chart_spec_item_level(data){
return cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"schema","schema",-1582001791),new cljs.core.Keyword(null,"transform","transform",1381301764),new cljs.core.Keyword(null,"columns","columns",1998437288),new cljs.core.Keyword(null,"facet","facet",-801327574),new cljs.core.Keyword(null,"background","background",-863952629),new cljs.core.Keyword(null,"bounds","bounds",1691609455),new cljs.core.Keyword(null,"spec","spec",347520401),new cljs.core.Keyword(null,"spacing","spacing",204422175),new cljs.core.Keyword(null,"data","data",-232669377)],["https://vega.github.io/schema/vega/v5.json",cljs.core.conj.cljs$core$IFn$_invoke$arity$2(dcs.prototype_6.view.ace_furniture.shared.transform_spec,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"calculate","calculate",-1224644403),"truncate(datum.item, 30)",new cljs.core.Keyword(null,"as","as",1148689641),"itemtruncated"], null)),(5),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"field","field",-1302436500),"itemtruncated",new cljs.core.Keyword(null,"type","type",1174270348),"nominal",new cljs.core.Keyword(null,"sort","sort",953465918),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"field","field",-1302436500),"trend",new cljs.core.Keyword(null,"op","op",-1882987955),"max",new cljs.core.Keyword(null,"order","order",-1254677256),"descending"], null),new cljs.core.Keyword(null,"header","header",119441134),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"title","title",636505583),"sub-category",new cljs.core.Keyword(null,"titlePadding","titlePadding",668470772),(30)], null)], null),"floralwhite","flush",new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"width","width",-384071477),(130),new cljs.core.Keyword(null,"height","height",1025178622),(50),new cljs.core.Keyword(null,"layer","layer",-1601820589),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"mark","mark",-373816345),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),"line",new cljs.core.Keyword(null,"point","point",1813198264),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"filled","filled",1908725116),false,new cljs.core.Keyword(null,"fill","fill",883462889),"#f2dfce"], null)], null),new cljs.core.Keyword(null,"encoding","encoding",1728578272),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"x","x",2099068185),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"field","field",-1302436500),"instant",new cljs.core.Keyword(null,"type","type",1174270348),"temporal",new cljs.core.Keyword(null,"axis","axis",-1215390822),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),null,new cljs.core.Keyword(null,"format","format",-1306924766),"%b %y",new cljs.core.Keyword(null,"labelAngle","labelAngle",-15299184),(90)], null)], null),new cljs.core.Keyword(null,"y","y",-1757859776),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"field","field",-1302436500),"avg-count",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative",new cljs.core.Keyword(null,"axis","axis",-1215390822),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"title","title",636505583),null], null),new cljs.core.Keyword(null,"scale","scale",-230427353),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"type","type",1174270348),"sqrt"], null)], null),new cljs.core.Keyword(null,"color","color",1011675173),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"condition","condition",1668437652),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"test","test",577538877),"datum.trend >= 0",new cljs.core.Keyword(null,"value","value",305978217),"#00769C"], null),new cljs.core.Keyword(null,"value","value",305978217),"#B46E6F"], null),new cljs.core.Keyword(null,"tooltip","tooltip",-1809677058),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"category",new cljs.core.Keyword(null,"field","field",-1302436500),"category",new cljs.core.Keyword(null,"type","type",1174270348),"nominal"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"sub-category",new cljs.core.Keyword(null,"field","field",-1302436500),"item",new cljs.core.Keyword(null,"type","type",1174270348),"nominal"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"period",new cljs.core.Keyword(null,"field","field",-1302436500),"period",new cljs.core.Keyword(null,"type","type",1174270348),"nominal"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"total count for the period",new cljs.core.Keyword(null,"field","field",-1302436500),"period-count",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"avg count per month",new cljs.core.Keyword(null,"field","field",-1302436500),"avg-count",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"trend",new cljs.core.Keyword(null,"field","field",-1302436500),"trend",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative"], null)], null)], null)], null)], null)], null),(35),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"values","values",372645556),data], null)]);
});
dcs.prototype_6.view.ace_furniture.trends.hint = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.content.is-small.has-text-info-dark","div.content.is-small.has-text-info-dark",-972313698),new cljs.core.PersistentVector(null, 15, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),"A circle on the a line represents the end of an ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"em","em",707813035),"accounting"], null)," period."," Click on it to see further detail, including the ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"em","em",707813035),"trend"], null)," value."," Each trend is calculated as a straight line approximation to the actual line, and the trend value is the slope of the line."," Upward trends are drawn in ",new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.has-text-weight-bold","span.has-text-weight-bold",619627971),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"color","color",1011675173),"#00769C"], null)], null),"blue"], null),", downward trends in ",new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.has-text-weight-bold","span.has-text-weight-bold",619627971),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"color","color",1011675173),"#B46E6F"], null)], null),"red"], null),"."," The furniture graphs are order by their trend - with the most positive (upward) trend first."," "], null)], null);
dcs.prototype_6.view.ace_furniture.trends.tabbed_area = (function dcs$prototype_6$view$ace_furniture$trends$tabbed_area(category_trends,item_trends){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tabs","div.tabs",-1767258748),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",-1349521403),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li.tab-trends.is-active","li.tab-trends.is-active",1366979513),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (e){
return dcs.prototype_6.util.open_tab(e,"trends","category-level");
})], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a","a",-2123407586),"Less detail"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li.tab-trends","li.tab-trends",-251188666),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-click","on-click",1632826543),(function (e){
return dcs.prototype_6.util.open_tab(e,"trends","item-level");
})], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a","a",-2123407586),"More detail"], null)], null)], null)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#category-level-trends.content.tab-content-trends","div#category-level-trends.content.tab-content-trends",1705854975),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),"The ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"b","b",1482224470),"trend"], null)," of the average-count-per-month of the items of furniture sold in each ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"b","b",1482224470),"category"], null),"."], null),dcs.prototype_6.view.ace_furniture.trends.hint,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.has-text-danger-dark","div.has-text-danger-dark",1318341422),new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),"The category ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.has-text-grey","span.has-text-grey",-1658302344),"Furniture"], null)," has the best trend (for the average number of items reused per month),"," and the category ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.has-text-grey","span.has-text-grey",-1658302344),"Children's items"], null)," has the worse."], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [oz.core.vega_lite,dcs.prototype_6.view.ace_furniture.trends.chart_spec_category_level(category_trends),dcs.prototype_6.util.vega_embed_opts], null)], null),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div#item-level-trends.content.tab-content-trends","div#item-level-trends.content.tab-content-trends",-2023058401),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"display","display",242065432),"none"], null)], null),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),"The ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"b","b",1482224470),"trend"], null)," of the average-count-per-month of the items of furniture sold in each ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"b","b",1482224470),"sub-category"], null),"."], null),dcs.prototype_6.view.ace_furniture.trends.hint,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.has-text-danger-dark","div.has-text-danger-dark",1318341422),new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),"The sub-category ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.has-text-grey","span.has-text-grey",-1658302344),"Chair, Kitchen, Dining or Wooden"], null)," has the best trend (for the average number of items reused per month),"," and the sub-category ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"span.has-text-grey","span.has-text-grey",-1658302344),"Wardrobe, single"], null)," has the worse."], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [oz.core.vega_lite,dcs.prototype_6.view.ace_furniture.trends.chart_spec_item_level(item_trends),dcs.prototype_6.util.vega_embed_opts], null)], null)], null);
});
dcs.prototype_6.view.ace_furniture.trends.root = (function dcs$prototype_6$view$ace_furniture$trends$root(){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [dcs.prototype_6.view.ace_furniture.trends.tabbed_area,cljs.core.deref(dcs.prototype_6.state.ace_furniture_counts_derivation_category_trends_cursor),cljs.core.deref(dcs.prototype_6.state.ace_furniture_counts_derivation_item_trends_cursor)], null);
});

//# sourceMappingURL=dcs.prototype_6.view.ace_furniture.trends.js.map
