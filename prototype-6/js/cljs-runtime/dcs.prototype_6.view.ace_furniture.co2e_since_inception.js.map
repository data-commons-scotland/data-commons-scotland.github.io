{"version":3,"sources":["dcs/prototype_6/view/ace_furniture/co2e_since_inception.cljs"],"mappings":";AAQA,AAAA,AAAMA,AACCC;AADP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAM6BA;;AAmB7B,AAAA,AAAMC,AACCD;AADP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAM4BA;;AAmB5B,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKE;AAIL,AAAA,AAAMC,AACHC,AAAqBC;AADxB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAKwD,AAAKC;AAAL,AAAQ,AAAA,AAAA,AAACC,AAAcD;AAL/E,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAM8C,AAAKA;AAAL,AAAQ,AAAA,AAAA,AAACC,AAAcD;AANrE,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAUIJ,AAQCM,AAAa,AAACT,AAA0BK,AAAsBK,AAK/DP,AACCM,AAAa,AAACP,AAAsBI,AAAkBI;;AAM3D,AAAA,AAAME;AAAN,AAAA,AAAA,AAAAD,AAAA,AAAAA,AACOP,AACCS,AACAC","names":["dcs.prototype-6.view.ace-furniture.co2e-since-inception/chart-spec-category-level","data","dcs.prototype-6.view.ace-furniture.co2e-since-inception/chart-spec-item-level","dcs.prototype-6.view.ace-furniture.co2e-since-inception/hint","dcs.prototype-6.view.ace-furniture.co2e-since-inception/tabbed-area","flights-per-category","flights-per-item","e","dcs.prototype-6.util/open-tab","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/deref","dcs.prototype-6.view.ace-furniture.co2e-since-inception/root","dcs.prototype-6.state/ace-furniture-weights-derivation-flights-per-category-cursor","dcs.prototype-6.state/ace-furniture-weights-derivation-flights-per-item-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.ace-furniture.co2e-since-inception\n  (:require\n    [oz.core :as oz]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]\n    [dcs.prototype-6.view.ace-furniture.shared :as shared]))\n\n\n(defn chart-spec-category-level\n      [data]\n       {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n        :width      500\n        :height     400\n        :background \"#f2dfce\"                                ;  \"#980f3d\"  \"#fff1e5\"\n        :data       {:values data}\n        :transform  [{:calculate \"datum.flight==1 ? '\u2708\ufe0f' : ''\" :as \"emoji\"}\n                     {:window  [{:op \"sum\" :field \"flight\" :as \"flights\"}]\n                      :groupby [\"category\"]}]\n        :mark       {:type  \"text\"\n                     :align \"left\"}\n        :encoding   {:y       {:field \"category\" :type \"nominal\"\n                               :sort {:field \"co2e\" :order \"descending\"}}\n                     :x       {:field \"flights\"\n                               :type  \"quantitative\"\n                               :axis  {:title \"equivalent number of flights\"}}\n                     :text    {:field \"emoji\" :type \"nominal\"}\n                     :size    {:value 15}\n                     :tooltip [{:field \"category\" :type \"nominal\"}\n                               {:title \"kg of CO2e\" :field \"co2e\" :type \"quantitative\"}\n                               {:title \"equivalent number of flights\" :field \"flights-total\" :type \"quantitative\"}]}\n        :config     {:axisX {:grid false}}})\n\n\n(defn chart-spec-item-level\n      [data]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      500\n       :height     1500\n       :background \"#f2dfce\"                                ;  \"#980f3d\"  \"#fff1e5\"\n       :data       {:values data}\n       :transform  [{:calculate \"datum.flight==1 ? '\u2708\ufe0f' : ''\" :as \"emoji\"}\n                    {:window  [{:op \"sum\" :field \"flight\" :as \"flights\"}]\n                     :groupby [\"category\" \"item\"]}]\n       :mark       {:type  \"text\"\n                    :align \"left\"}\n       :encoding   {:y       {:field \"item\" :type \"nominal\"\n                              :sort {:field \"co2e\" :order \"descending\"}}\n                    :x       {:field \"flights\"\n                              :type  \"quantitative\"\n                              :axis  {:title \"equivalent number of flights\"}}\n                    :text    {:field \"emoji\" :type \"nominal\"}\n                    :size    {:value 15}\n                    :tooltip [{:field \"category\" :type \"nominal\"}\n                              {:field \"item\" :type \"nominal\"}\n                              {:title \"kg of CO2e\" :field \"co2e\" :type \"quantitative\"}\n                              {:title \"equivalent number of flights\" :field \"flights-total\" :type \"quantitative\"}]}\n       :config     {:axisX {:grid false}}})\n\n(def hint [:div.content.is-small.has-text-info-dark\n           [:p \"TODO.... A coloured segment of a bar represents an \" [:em \"accounting\"] \" period.\"\n            \" Click on it to see further detail.\"]])\n\n(defn tabbed-area \n  [flights-per-category flights-per-item]\n  [:div\n   [:div.tabs\n    [:ul\n     [:li.tab-co2e-since-inception.is-active {:on-click (fn [e] (util/open-tab e \"co2e-since-inception\" \"category-level\"))} [:a \"Less detail\"]]\n     [:li.tab-co2e-since-inception {:on-click (fn [e] (util/open-tab e \"co2e-since-inception\" \"item-level\"))} [:a \"More detail\"]]]]\n\n   [:div#category-level-co2e-since-inception.content.tab-content-co2e-since-inception\n    [:p \"The \" [:b \"total CO\" [:sub \"2\"] \"e\"] \" (in terms of flights) of the items of furniture sold in each \" [:b \"category\"] \".\"]\n    hint\n    [:div\n     [:p \"TODO.... For the concern of pollution avoidance, the weight of furniture is more representative than the number of items.\"\n      \" So weights are depicted in the graph below.\"\n      \" The categories \" [:span.has-text-warning \"Large Household Appliances\"] \" and \"\n      [:span.has-text-warning \"Cooling Appliances\"] \" contain weighty items such as washing machines and fridge-freezers\"\n      \" so it is unsurprising that those two categories feature higher up this weights chart [below] than they did\"\n      \" in the counts chart [above].\"]]\n    [oz/vega-lite (chart-spec-category-level flights-per-category) util/vega-embed-opts]\n    ]\n\n   [:div#item-level-co2e-since-inception.content.tab-content-co2e-since-inception {:style {:display \"none\"}}\n    [:p \"The \" [:b \"total CO\" [:sub \"2\"] \"e\"] \" (in terms of flights) of the items of furniture sold in each \" [:b \"sub-category\"] \".\"]\n    hint\n    [oz/vega-lite (chart-spec-item-level flights-per-item) util/vega-embed-opts]\n    ]\n\n   ]\n  )\n\n(defn root []\n      [tabbed-area\n       @state/ace-furniture-weights-derivation-flights-per-category-cursor\n       @state/ace-furniture-weights-derivation-flights-per-item-cursor])"]}