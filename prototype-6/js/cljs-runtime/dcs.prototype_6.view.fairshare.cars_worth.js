goog.provide('dcs.prototype_6.view.fairshare.cars_worth');
dcs.prototype_6.view.fairshare.cars_worth.chart_spec_cars_worth = (function dcs$prototype_6$view$fairshare$cars_worth$chart_spec_cars_worth(data){
return cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"encoding","encoding",1728578272),new cljs.core.Keyword(null,"schema","schema",-1582001791),new cljs.core.Keyword(null,"transform","transform",1381301764),new cljs.core.Keyword(null,"config","config",994861415),new cljs.core.Keyword(null,"mark","mark",-373816345),new cljs.core.Keyword(null,"width","width",-384071477),new cljs.core.Keyword(null,"background","background",-863952629),new cljs.core.Keyword(null,"height","height",1025178622),new cljs.core.Keyword(null,"data","data",-232669377)],[new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"x","x",2099068185),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"field","field",-1302436500),"year",new cljs.core.Keyword(null,"type","type",1174270348),"temporal",new cljs.core.Keyword(null,"axis","axis",-1215390822),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"format","format",-1306924766),"%Y",new cljs.core.Keyword(null,"labelAngle","labelAngle",-15299184),(45),new cljs.core.Keyword(null,"labelBound","labelBound",-886739653),(50)], null)], null),new cljs.core.Keyword(null,"y","y",-1757859776),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"field","field",-1302436500),"cars",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative",new cljs.core.Keyword(null,"axis","axis",-1215390822),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"title","title",636505583),"equivalent number of cars"], null)], null),new cljs.core.Keyword(null,"text","text",-1790561697),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"field","field",-1302436500),"emoji",new cljs.core.Keyword(null,"type","type",1174270348),"nominal"], null),new cljs.core.Keyword(null,"size","size",1098693007),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"value","value",305978217),(15)], null),new cljs.core.Keyword(null,"tooltip","tooltip",-1809677058),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"field","field",-1302436500),"year",new cljs.core.Keyword(null,"type","type",1174270348),"temporal",new cljs.core.Keyword(null,"format","format",-1306924766),"%Y"], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"equivalent number of cars",new cljs.core.Keyword(null,"field","field",-1302436500),"num-of-cars",new cljs.core.Keyword(null,"type","type",1174270348),"quantitative"], null)], null)], null),"https://vega.github.io/schema/vega/v5.json",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"calculate","calculate",-1224644403),"datum.car==1 ? '\uD83D\uDE97' : ''",new cljs.core.Keyword(null,"as","as",1148689641),"emoji"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"window","window",724519534),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"op","op",-1882987955),"sum",new cljs.core.Keyword(null,"field","field",-1302436500),"car",new cljs.core.Keyword(null,"as","as",1148689641),"cars"], null)], null),new cljs.core.Keyword(null,"groupby","groupby",-497368173),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, ["year"], null)], null)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"axisX","axisX",-305600017),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"grid","grid",402978600),false], null)], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"align","align",1964212802),"center"], null),(300),"#f2dfce",(350),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"values","values",372645556),data], null)]);
});
dcs.prototype_6.view.fairshare.cars_worth.charts = (function dcs$prototype_6$view$fairshare$cars_worth$charts(co2e){
var car_co2e = cljs.core.cons(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"year","year",335913393),"2020-01-01",new cljs.core.Keyword(null,"car","car",-1555651612),(0),new cljs.core.Keyword(null,"num-of-cars","num-of-cars",-1612956764),(0)], null),cljs.core.cons(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"year","year",335913393),"2011-01-01",new cljs.core.Keyword(null,"car","car",-1555651612),(0),new cljs.core.Keyword(null,"num-of-cars","num-of-cars",-1612956764),(0)], null),cljs.core.flatten(cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__28086){
var map__28087 = p__28086;
var map__28087__$1 = cljs.core.__destructure_map(map__28087);
var year = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__28087__$1,new cljs.core.Keyword(null,"year","year",335913393));
var car_co2e = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__28087__$1,new cljs.core.Keyword(null,"car-co2e","car-co2e",1596659366));
var num_of_cars = (Math.round(car_co2e) | (0));
return cljs.core.repeat.cljs$core$IFn$_invoke$arity$2(num_of_cars,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"year","year",335913393),year,new cljs.core.Keyword(null,"car","car",-1555651612),(1),new cljs.core.Keyword(null,"num-of-cars","num-of-cars",-1612956764),num_of_cars], null));
}),cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__28088){
var vec__28089 = p__28088;
var year = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__28089,(0),null);
var coll = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__28089,(1),null);
return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"year","year",335913393),year,new cljs.core.Keyword(null,"car-co2e","car-co2e",1596659366),cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core._PLUS_,cljs.core.map.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"car-co2e","car-co2e",1596659366),coll))], null);
}),cljs.core.group_by(new cljs.core.Keyword(null,"year","year",335913393),cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__28092){
var map__28093 = p__28092;
var map__28093__$1 = cljs.core.__destructure_map(map__28093);
var yyyy_MM_dd = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__28093__$1,new cljs.core.Keyword(null,"yyyy-MM-dd","yyyy-MM-dd",1955353313));
var tonnes = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__28093__$1,new cljs.core.Keyword(null,"tonnes","tonnes",-913468653));
return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"year","year",335913393),[cljs.core.subs.cljs$core$IFn$_invoke$arity$3(yyyy_MM_dd,(0),(4)),"-01-01"].join(''),new cljs.core.Keyword(null,"car-co2e","car-co2e",1596659366),(tonnes / 4.9)], null);
}),co2e)))))));
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tile.is-ancestor","div.tile.is-ancestor",2069912078),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tile.is-4","div.tile.is-4",2067936913),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tile.is-vertical.is-parent","div.tile.is-vertical.is-parent",1401556234),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tile.is-child","div.tile.is-child",-1119574467),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [oz.core.vega_lite,dcs.prototype_6.view.fairshare.cars_worth.chart_spec_cars_worth(car_co2e),dcs.prototype_6.util.vega_embed_opts], null)], null)], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tile","div.tile",378522273),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tile.is-vertical.is-parent","div.tile.is-vertical.is-parent",1401556234),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.tile.is-child.content","div.tile.is-child.content",1180788468),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"blockquote","blockquote",372264190),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),"TODO:"], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"ul","ul",-1349521403),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",723558921),"The graph shows the equivalent amounts of CO2e, in terms of cars"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"li","li",723558921),"The calculation incorporates exhaust emissions, fuel supply chain and amortised car material for the average UK car"], null)], null)], null)], null)], null)], null)], null);
});
dcs.prototype_6.view.fairshare.cars_worth.root = (function dcs$prototype_6$view$fairshare$cars_worth$root(){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [dcs.prototype_6.view.fairshare.cars_worth.charts,cljs.core.deref(dcs.prototype_6.state.fairshare_co2e_derivation_cursor)], null);
});

//# sourceMappingURL=dcs.prototype_6.view.fairshare.cars_worth.js.map
