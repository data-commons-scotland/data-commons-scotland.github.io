{"version":3,"sources":["dcs/prototype_6/view/fairshare/per_quarter.cljs"],"mappings":";AAMA,AAAA,AAAMA,AACCC,AAAKC;AADZ,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAMmBA,AACSD;;AAkB5B,AAAA,AAAME,AAAQC;AAAd,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAGKC,AAAa,AAAA,AAACL,AAAsBI,AACpCE;;AAWL,AAAA,AAAME;AAAN,AAAA,AAAA,AAAAD,AACOJ,AACCM","names":["dcs.prototype-6.view.fairshare.per-quarter/chart-spec-per-season","data","title","dcs.prototype-6.view.fairshare.per-quarter/charts","material","oz.core/vega-lite","dcs.prototype-6.util/vega-embed-opts","cljs.core/deref","dcs.prototype-6.view.fairshare.per-quarter/root","dcs.prototype-6.state/fairshare-derivation-material-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.fairshare.per-quarter\n  (:require\n    [oz.core :as oz]\n    [dcs.prototype-6.util :as util]\n    [dcs.prototype-6.state :as state]))\n\n(defn chart-spec-per-season\n      [data title]\n      {:schema     \"https://vega.github.io/schema/vega/v5.json\"\n       :width      370\n       :height     200\n       :background \"#f2dfce\"\n       :title      title\n       :data       {:values data}\n       :transform  [{:timeUnit \"yearquarter\" :field \"yyyy-MM-dd\" :as \"quarter\"}\n                    {:aggregate [{:op \"sum\" :field \"tonnes\" :as \"tonnes\"}]\n                     :groupby [\"quarter\"]}]\n       :mark       {:type \"bar\"\n                    :cornerRadiusTopLeft  3\n                    :cornerRadiusTopRight 3}\n       :encoding   {:x       {:title \"year quarter\"\n                              :field \"quarter\" :type \"temporal\"\n                              :axis {:labelExpr \"timeFormat(datum.value, '%q') == '1' ? timeFormat(datum.value, 'Q%q %Y') : timeFormat(datum.value, 'Q%q')\"\n                                     :labelAngle 90\n                                     :tickCount {:interval \"month\" :step 3 :start 0}}}\n                    :y       {:field \"tonnes\" :type \"quantitative\"}\n                    :color   {:value \"#A2CAC1\"}\n                    :tooltip [{:title \"year quarter\" :field \"quarter\" :type \"temporal\" :format \"Q%q %Y\"}\n                              {:field \"tonnes\" :type \"quantitative\"}]}})\n\n\n(defn charts [material]\n  [:div.columns\n   [:column\n    [oz/vega-lite (chart-spec-per-season material \"Graph 4: Donations per quarter\")\n     util/vega-embed-opts]]\n   [:column\n    [:div.m-4.content\n     [:p \"Q3 donations are, by far, the most pronounced.\"\n      \" Q3 starts in June which - at Stirling, the host university - is the end of the academic year for most courses.\"\n      \" So the high Q3 donations are likely to be the results of students donating possessions before leaving for the summer.\"]\n     [:p \"For the period Q2 2013 to Q1 2014 the data has less date resolution which partially accounts for the irregular donation pattern during this period.\"\n      \" The other factor in this was, the unusually large donation of textiles\"\n      \" (duvet covers, sheets, pillowcases) from the student halls of residence [also evident in Graph 1].\"]]]]\n  )\n\n(defn root []\n      [charts\n       @state/fairshare-derivation-material-cursor])"]}