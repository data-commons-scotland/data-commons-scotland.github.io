{"version":3,"sources":["dcs/prototype_6/view/data.cljs"],"mappings":"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","names":["p__38842","map__38843","cljs.core/--destructure-map","cljs.core.get","dcs.prototype-6.view.data/dataset-row","name","description","record-count","attribute-count","creator","max-date-in-data","supplier","supplied-date","supply-url","licence","licence-url","cljs.core/contains?","goog.string/unescapeEntities","dcs.prototype-6.util/easier-repo-data","dcs.prototype-6.view.data/tooltip","main-text","tooltip-text","dcs.prototype-6.view.data/ele","route","metas","target","G__38844","reagent.core/after-render","dcs.prototype_6.util.scroll_fn","cljs.core/count","reitit.frontend.easy.href","cljs.core.map","cljs.core.sort_by","cljs.core/deref","dcs.prototype-6.view.data/root","dcs.prototype-6.state/meta-derivation-cursor"],"sourcesContent":["(ns dcs.prototype-6.view.data\n  (:require [reitit.frontend.easy :as rfe]\n            [reagent.core :as r]\n            [goog.string :as gstring]\n            [dcs.prototype-6.state :as state]\n            [dcs.prototype-6.util :as util]))\n\n(defn dataset-row\n  [{:keys [name description record-count attribute-count creator max-date-in-data supplier supplied-date supply-url licence licence-url]}]\n  \n  (if (contains? #{\"ace-furniture-count\" \"ace-furniture-avg-weight\"} name) ;; temporary hack until we release/publish these\n    \n    [:tr {:id name}\n     [:td.has-text-weight-bold name]\n     [:td description]\n     [:td max-date-in-data]\n     [:td record-count \" \" [:span \"x\" (gstring/unescapeEntities \"&nbsp;\") attribute-count]]\n     [:td \"t.b.d.\"]\n     [:td \"t.b.d.\"]\n     [:td \"t.b.d.\"]\n     [:td [:a {:href   (str util/easier-repo-data (str name \"-metadata.json\"))\n               :target \"_blank\"} \"CSVW\"]]\n     [:td supplied-date]\n     [:td [:a {:href   supply-url\n               :target \"_blank\"} supplier]]\n     [:td creator]\n     [:td [:a {:href   licence-url\n               :target \"_blank\"} licence]]] \n    \n    [:tr {:id name}\n     [:td.has-text-weight-bold name]\n     [:td description]\n     [:td max-date-in-data]\n     [:td record-count \" \" [:span \"x\" (gstring/unescapeEntities \"&nbsp;\") attribute-count]]\n     [:td [:a {:href   (str util/easier-repo-data (str name \".csv\"))\n               :target \"_blank\"} \"CSV\"]]\n     [:td [:a {:href   (str util/easier-repo-data (str name \".json\"))\n               :target \"_blank\"} \"JSON\"]]\n     [:td [:a {:href   (str util/easier-repo-data (str name \".ttl\"))\n               :target \"_blank\"} \"Turtle\"]]\n     [:td [:a {:href   (str util/easier-repo-data (str name \"-metadata.json\"))\n               :target \"_blank\"} \"CSVW\"]]\n     [:td supplied-date]\n     [:td [:a {:href   supply-url\n               :target \"_blank\"} supplier]]\n     [:td creator]\n     [:td [:a {:href   licence-url\n               :target \"_blank\"} licence]]]))\n\n\n(defn- tooltip\n  [main-text tooltip-text]\n  [:span.icon-text {:style {:display \"inline-block\" :white-space \"nowrap\"}}\n   main-text\n   [:span.icon.is-small.has-tooltip-bottom.has-tooltip-multiline.has-tooltip-info.has-text-danger\n    {:data-tooltip tooltip-text}\n    [:i.fas.fa-info-circle.fa-xs]]])\n\n(defn ele\n  [route metas]\n  (let [target (some-> route :parameters :query :target)]\n    ;(js/console.log (str \"target=\" target))\n    (if target \n      (r/after-render (util/scroll-fn target))\n      (r/after-render (util/scroll-fn)))\n\n    [:div\n     \n     [:section.hero.is-small.has-background {:style {:backgroundColor \"#fff1e5\"}}\n      [:img.hero-background.is-transparent {:src \"img/home-page-top-hero.jpg\"\n                                            :alt \"Datasets image\"}]\n      [:div.hero-body\n       [:div.container\n        [:div.content.has-text-centered\n         [:h1.title.is-5 {:style {:margin 0}}\n          [:span \"The \" (count metas)\n           \" \" [:a {:href (rfe/href :dcs.prototype-6.router/easier-open-data-view)} [:em \"easier\"]]\n           \" datasets that are used on this site\"]]]]]]\n\n     [:section.hero {:style {:backgroundColor \"#fff1e5\"}}\n      [:div.pt-4.hero-body\n\n       [:div.container\n        [:div.content\n         [:table#easier-table-fff1e5.table.is-hoverable.is-narrow\n          [:thead\n           [:tr.has-text-left\n            [:th.has-text-danger {:col-span 8} [:span \"dataset\"]]\n            [:th.has-text-danger {:col-span 4} [:span \"source\"]]]\n           [:tr.has-text-left\n            [:th.has-text-danger {:row-span 2} \"name\"]\n            [:th.has-text-danger {:row-span 2} \"description\"]\n            [:th.has-text-danger {:row-span 2} \"max date in data\"]\n            [:th.has-text-danger {:row-span 2} \"rows \" [:span \"x\" (gstring/unescapeEntities \"&nbsp;\") \"cols\"]]\n            [:th.has-text-danger {:col-span 3} [:span \"the data\" \" \" [:span \"(3\" (gstring/unescapeEntities \"&nbsp;\") \"formats)\"]]]\n            [:th.has-text-danger {:row-span 2} (tooltip [:span \"its spec\"] \"a machine-oriented description of the data's: entity URI; column names, types, references; etc.\")]\n            [:th.has-text-danger \"supplied when\"]\n            [:th.has-text-danger \"supplier\"]\n            [:th.has-text-danger \"creator\"]\n            [:th.has-text-danger \"licence\"]]\n           [:tr.has-text-left\n            [:th.has-text-danger (tooltip \"CSV\" \" a simple tabular, human-oriented format\")]\n            [:th.has-text-danger (tooltip \"JSON\" \"a machine-oriented format used by many software tools\")]\n            [:th.has-text-danger (tooltip \"Turtle\" \"a machine-oriented format used by linked data (RDF) tools\")]]]\n          [:tbody \n           (map dataset-row (sort-by :name metas))\n           [:tr {:id \"zip-bundles\"}\n            [:td]\n            [:td [:em \"(handy ZIP bundles)\"]]\n            [:td [:a {:href   (str util/easier-repo-data \"all-csv.zip\")\n                      :target \"_blank\"} \"ZIP\"]]\n            [:td [:a {:href   (str util/easier-repo-data \"all-json.zip\")\n                      :target \"_blank\"} \"ZIP\"]]\n            [:td [:a {:href   (str util/easier-repo-data \"all-turtle.zip\")\n                      :target \"_blank\"} \"ZIP\"]]\n            [:td [:a {:href   (str util/easier-repo-data \"all-csvw.zip\")\n                      :target \"_blank\"} \"ZIP\"]]\n            [:td]\n            [:td]\n            [:td]\n            [:td]\n            [:td]]]]]]]]]))\n\n\n(defn root [route]\n  [ele\n   route\n   @state/meta-derivation-cursor])\n\n\n"]}